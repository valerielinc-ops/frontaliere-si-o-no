import{r as c}from"./vendor-charts-aQyCzDkf.js";const g="https://api.frankfurter.app/latest?from=CHF&to=EUR",o="exchange_rate_cache",p=300*1e3;function u(){try{const t=localStorage.getItem(o);if(!t)return null;const e=JSON.parse(t);if(Date.now()-e.timestamp<p)return e.rate}catch{}return null}function d(t){try{const e={rate:t,timestamp:Date.now()};localStorage.setItem(o,JSON.stringify(e))}catch{}}async function m(){var e;const t=u();if(t)return t;try{const r=await(await fetch(g)).json();if((e=r==null?void 0:r.rates)!=null&&e.EUR){const n=r.rates.EUR;return d(n),n}}catch(a){console.error("Failed to fetch exchange rate:",a)}try{const a=localStorage.getItem(o);if(a)return JSON.parse(a).rate}catch{}return .94}function E(){const[t,e]=c.useState(()=>u()||.94),[a,r]=c.useState(!1),[n,f]=c.useState(null);return c.useEffect(()=>{let s=!0;const l=async()=>{r(!0);try{const h=await m();s&&(e(h),f(new Date))}finally{s&&r(!1)}};l();const i=setInterval(l,300*1e3);return()=>{s=!1,clearInterval(i)}},[]),{rate:t,loading:a,lastUpdate:n}}export{E as u};
//# sourceMappingURL=exchangeRateService-b--3bgFi.js.map
