import{c as y,u as q,a as E,j as e,T as de,I as ne,A as Y,b as ce,P as xe,H as J,C as he,d as me,U as ue,B as Q,e as be,f as pe}from"./index-DIpd8jQu.js";import{E as fe,a as ge}from"./vendor-pdf-BpXxwvYp.js";import{r as D,d as K,B as je,C as B,X as U,Y as V,T as I,L as T,e as O,P as ee,f as te,h as se,A as ke,i as ve,j as Ne,k as L}from"./vendor-charts-B1jiPnU9.js";import{P as ae}from"./percent-DKqt8baA.js";import{C as we}from"./chart-column-C3B5dTO4.js";import{C as w}from"./chevron-right-i23sJHM4.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],Ce=y("armchair",ye);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Fe=y("arrow-up-right",$e);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],Ie=y("chart-line",_e);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ze=y("chart-pie",Te);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],le=y("scroll-text",He);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Re=y("shield-check",Ae);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Me=y("shopping-bag",Se);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Le=y("wallet",Ee),z=({active:x,payload:a,label:r,isDarkMode:o,currency:t="CHF"})=>x&&a&&a.length?e.jsxs("div",{className:`p-4 border rounded-2xl shadow-xl min-w-[180px] z-50 pointer-events-none backdrop-blur-md ${o?"bg-slate-900/95 border-slate-700 shadow-slate-950/50":"bg-white/95 border-slate-100 shadow-slate-200/50"}`,children:[r&&e.jsx("p",{className:`font-bold mb-3 text-xs uppercase tracking-wider border-b pb-2 ${o?"text-slate-500 border-slate-700":"text-slate-500 border-slate-100"}`,children:r}),e.jsx("div",{className:"space-y-2",children:a.map((l,n)=>e.jsxs("div",{className:"flex items-center justify-between gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full shadow-sm",style:{backgroundColor:l.color||l.fill||l.stroke}}),e.jsx("span",{className:`font-bold ${o?"text-slate-300":"text-slate-600"}`,children:l.name})]}),e.jsxs("span",{className:`font-mono font-bold ${o?"text-slate-100":"text-slate-800"}`,children:[t," ",l.value.toLocaleString("it-IT",{maximumFractionDigits:0})]})]},n))})]}):null,H=({payload:x,isDarkMode:a})=>e.jsx("div",{className:"flex flex-wrap justify-center gap-x-6 gap-y-2 pt-4 px-2",children:x.map((r,o)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r.color||r.fill||r.stroke}}),e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wide ${a?"text-slate-500":"text-slate-600"}`,children:r.value})]},`item-${o}`))}),W=({title:x,value:a,subtext:r,icon:o,colorClass:t})=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-4 border border-slate-100 dark:border-slate-700 flex items-start justify-between group hover:border-slate-300 dark:hover:border-slate-600 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-slate-500 tracking-wider mb-1",children:x}),e.jsx("p",{className:`text-xl font-mono font-bold ${t}`,children:a}),r&&e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:r})]}),e.jsx("div",{className:`p-2 rounded-xl bg-white dark:bg-slate-800 shadow-sm ${t.replace("text-","text-opacity-80 text-")}`,children:e.jsx(o,{size:18})})]}),We=({result:x,inputs:a,isDarkMode:r,isFocusMode:o})=>{const{t}=q(),[l,n]=D.useState("overview"),[h,u]=D.useState("NET"),v=d=>{n(d),Y.trackChartInteraction(d,"change_tab")},{chResident:p,itResident:b,savingsCHF:_}=x,C=t("chart.net"),$=t("chart.taxes"),s=t("chart.social"),j=[{name:t("chart.switzerland"),[C]:p.netIncomeAnnual,[$]:p.taxes,[s]:p.socialContributions+p.healthInsurance},{name:t("chart.frontier_worker"),[C]:b.netIncomeAnnual,[$]:b.taxes,[s]:b.socialContributions}],g=d=>d.breakdown.filter(i=>!i.label.includes("grossIncome")&&!i.label.includes("Allowance")&&!i.label.includes("netAnnual")).map(i=>{let k="#cbd5e1";const f=i.label.toLowerCase();return(f.includes("social")||f.includes("avs"))&&(k="#8b5cf6"),(f.includes("pension")||f.includes("lpp"))&&(k="#a78bfa"),(f.includes("tax")||f.includes("source")||f.includes("irpef"))&&(k="#64748b"),(f.includes("health")||f.includes("ssn"))&&(k="#f43f5e"),f.includes("expense")&&(k="#f59e0b"),{name:t(i.label.split("|")[0]),value:Math.abs(i.amount),color:k}}).concat([{name:t("chart.net_residual"),value:d.netIncomeAnnual,color:"#10b981"}]),N=g(p),A=g(b),F=Array.from({length:5+1},(d,i)=>({year:`${t("chart.year")} ${i}`,[t("chart.accumulated_difference")]:Math.abs(_)*i,beneficiary:_>0?t("chart.frontier_worker"):t("chart.resident")})),G=D.useMemo(()=>{const d=[];for(let i=5e4;i<=3e5;i+=1e4){const k=E({...a,annualIncomeCHF:i}),f=E({...a,annualIncomeCHF:i,frontierWorkerType:"NEW",distanceZone:"WITHIN_20KM"}),X=E({...a,annualIncomeCHF:i,frontierWorkerType:"NEW",distanceZone:"OVER_20KM"}),Z=E({...a,annualIncomeCHF:i,frontierWorkerType:"OLD"}),S=M=>M.grossIncome+M.familyAllowance-M.netIncomeAnnual-M.customExpensesTotal;h==="NET"?d.push({ral:`CHF ${(i/1e3).toFixed(0)}k`,originalIncome:i,[t("chart.resident_ch")]:Math.round(k.chResident.netIncomeAnnual),[t("chart.new_less_20km")]:Math.round(f.itResident.netIncomeAnnual),[t("chart.new_more_20km")]:Math.round(X.itResident.netIncomeAnnual),[t("chart.old_frontier")]:Math.round(Z.itResident.netIncomeAnnual)}):d.push({ral:`CHF ${(i/1e3).toFixed(0)}k`,originalIncome:i,[t("chart.resident_ch")]:Math.round(S(k.chResident)),[t("chart.new_less_20km")]:Math.round(S(f.itResident)),[t("chart.new_more_20km")]:Math.round(S(X.itResident)),[t("chart.old_frontier")]:Math.round(S(Z.itResident))})}return d},[a,h]),m=(p.taxes/p.grossIncome*100).toFixed(1),ie=(b.taxes/b.grossIncome*100).toFixed(1),oe=(Math.abs(_)/Math.min(p.netIncomeAnnual,b.netIncomeAnnual)*100).toFixed(1);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[e.jsx(W,{title:t("chart.effective_rate_ch"),value:`${m}%`,subtext:t("chart.tax_incidence"),icon:ae,colorClass:"text-blue-600 dark:text-blue-400"}),e.jsx(W,{title:t("chart.effective_rate_it"),value:`${ie}%`,subtext:t("chart.tax_incidence"),icon:ae,colorClass:"text-red-600 dark:text-red-400"}),e.jsx(W,{title:t("chart.net_difference"),value:`${oe}%`,subtext:t("chart.purchasing_power_delta"),icon:Fe,colorClass:"text-emerald-600 dark:text-emerald-400"}),e.jsx(W,{title:t("chart.accumulation_5y"),value:`${(Math.abs(_)*5/1e3).toFixed(1)}k`,subtext:t("chart.potential_savings"),icon:Le,colorClass:"text-indigo-600 dark:text-indigo-400"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-1 shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"grid grid-cols-4 gap-1 p-1 bg-slate-50 dark:bg-slate-900/50 rounded-2xl",children:[{id:"overview",label:t("chart.tab_comparison"),icon:we},{id:"breakdown",label:t("chart.tab_details"),icon:ze},{id:"projection",label:t("chart.tab_projection"),icon:de},{id:"breakeven",label:t("chart.tab_salary_analysis"),icon:Ie}].map(d=>e.jsxs("button",{onClick:()=>v(d.id),className:`flex flex-col sm:flex-row items-center justify-center gap-1.5 py-3 px-1 rounded-xl text-[9px] sm:text-xs font-bold uppercase tracking-wide transition-all ${l===d.id?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm scale-[0.98]":"text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:[e.jsx(d.icon,{size:16,className:l===d.id?"stroke-[2.5px]":""}),e.jsx("span",{className:"truncate",children:d.label})]},d.id))}),e.jsxs("div",{className:"p-4 sm:p-6 min-h-[320px] bg-white dark:bg-slate-800 rounded-b-3xl relative",children:[l==="projection"&&e.jsxs("div",{className:"mb-6 bg-indigo-50/50 dark:bg-indigo-900/20 p-4 rounded-xl border border-indigo-100 dark:border-indigo-800/50 flex gap-3 animate-fade-in",children:[e.jsx(ne,{size:18,className:"text-indigo-500 shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-xs text-indigo-900 dark:text-indigo-300 leading-relaxed",children:[e.jsx("strong",{className:"block mb-1 font-bold",children:t("chart.projection_title")}),t("chart.projection_description")]})]}),l==="breakeven"&&e.jsxs("div",{className:"mb-4 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:t(h==="NET"?"chart.net_income_comparison":"chart.tax_burden_comparison")}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-900 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>u("NET"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${h==="NET"?"bg-white dark:bg-slate-700 text-emerald-600 shadow-sm":"text-slate-500 hover:text-slate-600"}`,children:t("chart.net")}),e.jsx("button",{onClick:()=>u("TAX"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all ${h==="TAX"?"bg-white dark:bg-slate-700 text-red-500 shadow-sm":"text-slate-500 hover:text-slate-600"}`,children:t("chart.taxes_charges")})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-3 rounded-xl border border-slate-100 dark:border-slate-800 text-xs text-slate-500 dark:text-slate-500 mb-4",children:[t("chart.salary_simulation_desc"),h==="NET"?` ${t("chart.shows_net_residual")}`:` ${t("chart.shows_total_taxes")}`]})]}),e.jsx(K,{width:"100%",height:320,children:l==="overview"?e.jsxs(je,{data:j,barGap:0,margin:{top:20,right:30,left:0,bottom:5},children:[e.jsx(B,{strokeDasharray:"3 3",vertical:!1,stroke:r?"#334155":"#f1f5f9"}),e.jsx(U,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:r?"#94a3b8":"#64748b",fontSize:12,fontWeight:700},dy:10}),e.jsx(V,{hide:!0}),e.jsx(I,{content:e.jsx(z,{isDarkMode:r}),cursor:{fill:r?"#1e293b":"#f8fafc"}}),e.jsx(T,{content:e.jsx(H,{isDarkMode:r})}),e.jsx(O,{dataKey:s,stackId:"a",fill:"#8b5cf6",radius:[0,0,4,4]}),e.jsx(O,{dataKey:$,stackId:"a",fill:"#64748b"}),e.jsx(O,{dataKey:C,stackId:"a",fill:"#10b981",radius:[4,4,0,0]})]}):l==="breakdown"?e.jsxs("div",{className:"w-full h-full flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center relative",children:[e.jsx("h4",{className:"text-xs font-bold uppercase text-slate-500 mb-2",children:t("chart.resident_ch")}),e.jsxs("div",{className:"w-full h-full relative",children:[e.jsx(K,{children:e.jsxs(ee,{children:[e.jsx(te,{data:N,cx:"50%",cy:"50%",innerRadius:50,outerRadius:70,paddingAngle:2,dataKey:"value",children:N.map((d,i)=>e.jsx(se,{fill:d.color,strokeWidth:0},`cell-${i}`))}),e.jsx(I,{content:e.jsx(z,{isDarkMode:r})}),e.jsx(T,{content:e.jsx(H,{isDarkMode:r})})]})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none mb-8",children:e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"CH"})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center relative border-t md:border-t-0 md:border-l border-dashed border-slate-100 dark:border-slate-700 pt-4 md:pt-0",children:[e.jsx("h4",{className:"text-xs font-bold uppercase text-slate-500 mb-2",children:t("chart.frontier_worker")}),e.jsxs("div",{className:"w-full h-full relative",children:[e.jsx(K,{children:e.jsxs(ee,{children:[e.jsx(te,{data:A,cx:"50%",cy:"50%",innerRadius:50,outerRadius:70,paddingAngle:2,dataKey:"value",children:A.map((d,i)=>e.jsx(se,{fill:d.color,strokeWidth:0},`cell-${i}`))}),e.jsx(I,{content:e.jsx(z,{isDarkMode:r})}),e.jsx(T,{content:e.jsx(H,{isDarkMode:r})})]})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none mb-8",children:e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"IT"})})]})]})]}):l==="projection"?e.jsxs(ke,{data:F,margin:{top:20,right:30,left:0,bottom:5},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorSavings",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),e.jsx(B,{strokeDasharray:"3 3",vertical:!1,stroke:r?"#334155":"#f1f5f9"}),e.jsx(U,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fill:r?"#94a3b8":"#64748b",fontSize:12,fontWeight:700}}),e.jsx(V,{hide:!0}),e.jsx(I,{content:e.jsx(z,{isDarkMode:r})}),e.jsx(ve,{type:"monotone",dataKey:t("chart.accumulated_difference"),stroke:"#10b981",strokeWidth:3,fillOpacity:1,fill:"url(#colorSavings)",activeDot:{r:6,strokeWidth:0}}),e.jsx(T,{content:e.jsx(H,{isDarkMode:r})})]}):e.jsxs(Ne,{data:G,margin:{top:20,right:30,left:0,bottom:5},children:[e.jsx(B,{strokeDasharray:"3 3",vertical:!1,stroke:r?"#334155":"#f1f5f9"}),e.jsx(U,{dataKey:"ral",axisLine:!1,tickLine:!1,tick:{fill:r?"#94a3b8":"#64748b",fontSize:10,fontWeight:700}}),e.jsx(V,{hide:!0,domain:["auto","auto"]}),e.jsx(I,{content:e.jsx(z,{isDarkMode:r})}),e.jsx(L,{type:"monotone",dataKey:t("chart.resident_ch"),stroke:"#3b82f6",strokeWidth:3,dot:!1,activeDot:{r:6}}),e.jsx(L,{type:"monotone",dataKey:t("chart.new_less_20km"),stroke:"#6366f1",strokeWidth:3,dot:!1,activeDot:{r:6}}),e.jsx(L,{type:"monotone",dataKey:t("chart.new_more_20km"),stroke:"#f97316",strokeWidth:3,strokeDasharray:"5 5",dot:!1,activeDot:{r:6}}),e.jsx(L,{type:"monotone",dataKey:t("chart.old_frontier"),stroke:"#10b981",strokeWidth:2,strokeDasharray:"3 3",dot:!1,activeDot:{r:4},opacity:.6}),e.jsx(T,{content:e.jsx(H,{isDarkMode:r})})]})})]})]})]})},c=x=>Math.abs(Math.round(x)).toLocaleString("it-IT"),P=({value:x,currency:a,className:r="",smallCurrency:o})=>e.jsxs("span",{className:`font-mono font-bold tracking-tight whitespace-nowrap ${r}`,children:[!o&&(a==="EUR"?"€ ":"CHF "),c(x),o&&e.jsx("span",{className:"text-[0.7em] ml-1 font-sans font-normal text-slate-500 dark:text-slate-500",children:a})]}),Pe=x=>{const a=x.toLowerCase();return a.includes("netannual")||a.includes("net_annual")||a==="calc.netannualincome"?"bg-emerald-500":a.includes("social")||a.includes("pension")||a.includes("contribut")?"bg-violet-500":a.includes("health")?"bg-amber-500":a.includes("tax")||a.includes("source")||a.includes("irpef")||a.includes("ssn")?"bg-slate-500":a.includes("expense")?"bg-orange-400":a.includes("income")||a.includes("allowance")?"bg-blue-500":"bg-slate-200 dark:bg-slate-700"},re=({data:x,currency:a,showEUR:r})=>{const{t:o}=q(),t=l=>{if(!l)return"";const n=l.split("|"),h=n[0],u=o(h);return u!==h&&n.length>1?h==="calc.healthInsuranceDesc"?`${u} (CHF ${n[1]}/mese × ${n[2]} ${o("calc.familyMembers")})`:`${u}. ${n.slice(1).map((v,p)=>p===0?`${o("calc.estimatedRate")}: ${v}%`:`${o("calc.table")}: ${v}`).join(". ")}.`:u};return e.jsx("div",{className:"w-full text-sm",children:x.map((l,n)=>{const h=n===0,u=l.label==="calc.netAnnualIncome",v=l.amount<0,p=Pe(l.label);return e.jsxs("div",{className:`flex items-center justify-between py-3 border-b border-dashed border-slate-100 dark:border-slate-800 last:border-0 hover:bg-slate-50/80 dark:hover:bg-slate-800/80 px-3 rounded-lg transition-colors group cursor-default relative ${u?"bg-emerald-50/50 dark:bg-emerald-900/10 mt-2 rounded-xl border-none":""}`,children:[e.jsxs("div",{className:"flex-1 pr-3 flex items-center gap-2 min-w-0",children:[!h&&!u&&e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${p}`}),e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[e.jsx("div",{className:`truncate transition-colors ${h||u?"font-bold text-base text-slate-900 dark:text-slate-100":"font-medium text-slate-600 dark:text-slate-500 group-hover:text-slate-900 dark:group-hover:text-slate-200"}`,children:t(l.label)}),!h&&l.description&&e.jsxs("div",{className:"group/tooltip relative inline-flex items-center flex-shrink-0",children:[e.jsx(ne,{size:12,className:"text-slate-300 dark:text-slate-600 cursor-help group-hover/tooltip:text-indigo-500 transition-colors"}),e.jsxs("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover/tooltip:block w-56 p-3 bg-slate-900 dark:bg-slate-800 text-white text-[11px] font-medium rounded-xl shadow-2xl z-50 animate-fade-in border border-slate-700",children:[t(l.description),e.jsx("div",{className:"absolute top-full left-2 -translate-x-1/2 border-8 border-transparent border-t-slate-900 dark:border-t-slate-800"})]})]})]})]}),e.jsxs("div",{className:"text-right flex items-center justify-end gap-3 flex-shrink-0",children:[l.percentage!==0&&!u&&e.jsxs("div",{className:"w-10 sm:w-12 text-[9px] sm:text-[10px] font-bold text-slate-600 dark:text-slate-500 bg-slate-100 dark:bg-slate-800 group-hover:bg-slate-200/70 rounded px-1 py-0.5 text-center flex-shrink-0 transition-colors hidden sm:block",children:[Math.abs(l.percentage).toFixed(1),"%"]}),e.jsxs("div",{className:"flex flex-col items-end w-[110px]",children:[e.jsxs("div",{className:`text-right font-mono font-bold whitespace-nowrap ${u?"text-lg text-emerald-700 dark:text-emerald-400":v?"text-red-700 dark:text-red-400":"text-slate-800 dark:text-slate-100"}`,children:[v?"-":""," ",e.jsx(P,{value:l.amount,currency:a})]}),r&&e.jsx("div",{className:"text-[10px] font-mono text-slate-500 dark:text-slate-500 font-medium whitespace-nowrap h-4",children:l.amountEUR!==void 0&&l.amountEUR!==0?`≈ € ${c(Math.abs(l.amountEUR))}`:""})]})]})]},n)})})},Ye=({result:x,inputs:a,isDarkMode:r,isFocusMode:o})=>{const{t}=q(),{chResident:l,itResident:n,savingsCHF:h,savingsEUR:u,exchangeRate:v,monthsBasis:p}=x,b=h>0,C=(()=>{const s=[],j=a.sex==="M"?t("input.male"):t("input.female");s.push({label:`${j}, ${a.age} ${t("common.years")}`,icon:ue,color:"text-blue-700 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/20"});let g="";a.maritalStatus==="SINGLE"?g=t("input.single"):a.maritalStatus==="MARRIED"?g=a.spouseWorks?`${t("input.married")} (${t("input.spouseWorks")})`:t("input.married"):a.maritalStatus==="DIVORCED"?g=t("input.divorced"):g=t("input.widowed"),s.push({label:g,icon:J,color:"text-rose-700 dark:text-rose-400",bg:"bg-rose-50 dark:bg-rose-900/20"}),a.children>0?s.push({label:t("input.childrenCount",{count:a.children}),icon:Q,color:"text-pink-700 dark:text-pink-400",bg:"bg-pink-50 dark:bg-pink-900/20"}):s.push({label:t("input.noChildren"),icon:Q,color:"text-slate-500",bg:"bg-slate-100 dark:bg-slate-800"});const N=a.frontierWorkerType==="NEW"?`${t("input.newFrontShort")} (${a.distanceZone==="WITHIN_20KM"?"<20km":">20km"})`:t("input.oldFrontShort");return s.push({label:N,icon:be,color:"text-emerald-700 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-900/20"}),s.push({label:`RAL: CHF ${c(a.annualIncomeCHF)}`,icon:pe,color:"text-amber-700 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/20"}),s})(),$=()=>{Y.trackDownload("pdf","Report Comparison");try{const s=new fe;s.setFillColor(30,41,59),s.rect(0,0,210,40,"F"),s.setTextColor(255,255,255),s.setFontSize(22),s.setFont("helvetica","bold"),s.text(t("results.pdf.title"),14,18),s.setFontSize(10),s.setFont("helvetica","normal"),s.setTextColor(148,163,184),s.text(t("results.pdf.subtitle"),14,24),s.setFontSize(10),s.setTextColor(255,255,255),s.text(`${t("results.pdf.generatedOn")} ${new Date().toLocaleDateString()}`,150,18),s.setFillColor(241,245,249),s.setDrawColor(226,232,240),s.roundedRect(14,45,182,18,2,2,"FD"),s.setFontSize(9),s.setTextColor(71,85,105),s.setFont("helvetica","bold"),s.text(`${t("results.pdf.profile")}:`,18,56),s.setFont("helvetica","normal");const j=C.map(m=>m.label).join(" • ");s.text(j,40,56);const g=[[t("results.pdf.grossIncome"),`CHF ${c(l.grossIncome)}`,`CHF ${c(n.grossIncome)}`],[t("results.pdf.familyAllowance"),`+ CHF ${c(l.familyAllowance)}`,`+ CHF ${c(n.familyAllowance)}`],[t("results.pdf.socialDeductions"),`- CHF ${c(Math.abs(l.socialContributions))}`,`- CHF ${c(Math.abs(n.socialContributions))}`],[t("results.pdf.totalTaxes"),`- CHF ${c(Math.abs(l.taxes))}`,`- CHF ${c(Math.abs(n.taxes))}`],[t("results.pdf.healthInsurance"),`- CHF ${c(Math.abs(l.healthInsurance))}`,`(${t("results.pdf.notDeducted")})`],[t("results.pdf.personalExpenses"),`- CHF ${c(Math.abs(l.customExpensesTotal))}`,`- CHF ${c(Math.abs(n.customExpensesTotal))}`],[t("results.pdf.netAnnualIncome"),`CHF ${c(l.netIncomeAnnual)}`,`CHF ${c(n.netIncomeAnnual)}`]];n.swissNetIncomeMonthlyCHF&&g.splice(6,0,[t("results.pdf.swissNetPreTax"),"-",`CHF ${c(n.swissNetIncomeMonthlyCHF*a.monthsBasis)}`]),ge(s,{startY:70,head:[[t("results.pdf.headerItem"),t("results.pdf.headerSwiss"),t("results.pdf.headerFrontier")]],body:g,theme:"grid",headStyles:{fillColor:[59,130,246],fontSize:10,fontStyle:"bold",halign:"center"},columnStyles:{0:{cellWidth:70,fontStyle:"bold",textColor:[51,65,85]},1:{halign:"right",textColor:[30,58,138]},2:{halign:"right",textColor:[185,28,28]}},styles:{fontSize:10,cellPadding:6,lineColor:[226,232,240],lineWidth:.1},didParseCell:function(m){m.row.index===g.length-1&&(m.cell.styles.fontStyle="bold",m.cell.styles.fillColor=[236,253,245],m.cell.styles.textColor=[5,150,105],m.cell.styles.fontSize=12),m.row.cells[0].raw===t("results.pdf.swissNetPreTax")&&(m.cell.styles.fillColor=[248,250,252],m.cell.styles.fontStyle="italic")}});const N=s.lastAutoTable.finalY+15;s.setFontSize(12),s.setTextColor(30,41,59),s.setFont("helvetica","bold");const A=t(b?"results.pdf.frontierWins":"results.pdf.residenceWins"),R=b?[22,163,74]:[37,99,235];s.setTextColor(R[0],R[1],R[2]),s.text(A,14,N),s.setFontSize(10),s.setTextColor(71,85,105),s.setFont("helvetica","normal"),s.text(`${t("results.pdf.estimatedDifference")}: CHF ${c(h)} / ${t("results.pdf.year")}`,14,N+6);let F=N+20;s.setFontSize(9),s.setFont("helvetica","bold"),s.text(`${t("results.pdf.taxDetails")}:`,14,F),s.setFont("helvetica","normal"),F+=6,[`${t("results.pdf.exchangeApplied")}: 1 CHF = ${a.customExchangeRate} EUR`,`${t("results.pdf.italyRegime")}: ${t(n.details.regime)}`,...n.details.notes.map(m=>t(m.split("|")[0]))].forEach(m=>{s.text(`• ${m}`,14,F),F+=5}),s.setFontSize(8),s.setTextColor(148,163,184),s.text(t("results.pdf.disclaimer"),105,285,{align:"center"}),s.save(t("results.pdf.filename"))}catch(s){console.error("PDF Export failed:",s),Y.trackError("PDF Export Failed")}};return e.jsxs("div",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl rounded-3xl shadow-xl shadow-slate-200/50 border border-white/60 dark:border-slate-800 overflow-hidden flex flex-col h-full animate-fade-in-up transition-colors duration-300",children:[e.jsxs("div",{className:"p-5 bg-white/50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-800 flex justify-between items-start sm:items-center sticky top-0 z-10 backdrop-blur-md gap-4 flex-col sm:flex-row",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:t("results.comparativeAnalysis")}),e.jsx("button",{onClick:$,className:"p-2 text-slate-500 hover:text-blue-600 transition-all flex-shrink-0 sm:hidden",title:t("results.downloadPDF"),children:e.jsx(le,{size:20})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:C.map((s,j)=>e.jsxs("div",{className:`flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-[10px] sm:text-xs font-bold uppercase tracking-wide border border-transparent ${s.bg} ${s.color}`,children:[e.jsx(s.icon,{size:12,strokeWidth:2.5}),e.jsx("span",{className:"truncate max-w-[150px] sm:max-w-none",children:s.label})]},j))})]}),e.jsx("button",{onClick:$,className:"hidden sm:block p-2.5 text-slate-500 hover:text-blue-600 transition-all flex-shrink-0",title:t("results.downloadPDF"),children:e.jsx(le,{size:20})})]}),e.jsxs("div",{className:"p-4 sm:p-6 flex-grow overflow-y-auto custom-scrollbar bg-slate-50/30 dark:bg-slate-950/30",children:[e.jsxs("div",{className:`p-4 sm:p-6 rounded-3xl text-white shadow-lg mb-8 relative overflow-hidden transition-all duration-500 group ${b?"bg-gradient-to-r from-emerald-500 via-teal-500 to-emerald-600":"bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-700"}`,children:[e.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-10%] left-[10%] w-4 h-4 bg-white rounded-full animate-bounce [animation-duration:3s]"}),e.jsx("div",{className:"absolute top-[-5%] left-[30%] w-3 h-3 bg-yellow-300 rounded-full animate-bounce [animation-duration:2.5s] [animation-delay:0.5s]"}),e.jsx("div",{className:"absolute top-[-15%] left-[60%] w-5 h-5 bg-white rounded-full animate-bounce [animation-duration:3.2s] [animation-delay:1s]"}),e.jsx("div",{className:"absolute top-[-8%] left-[80%] w-2 h-2 bg-yellow-300 rounded-full animate-bounce [animation-duration:2.8s] [animation-delay:0.2s]"}),e.jsx("div",{className:"absolute top-[20%] right-[-5%] w-6 h-6 bg-white/30 rounded-full animate-ping [animation-duration:4s]"})]}),e.jsxs("div",{className:"flex items-center gap-4 sm:gap-6 relative z-10",children:[e.jsx("div",{className:"bg-white/20 p-3 sm:p-4 rounded-2xl backdrop-blur-md shrink-0 transition-transform group-hover:scale-110 duration-300",children:b?e.jsx(ce,{size:28,className:"text-yellow-300"}):e.jsx(Ce,{size:28,className:"text-indigo-200"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold tracking-tight truncate",children:t(b?"results.frontierBetter":"results.swissBetter")}),b&&e.jsx(xe,{size:24,className:"animate-bounce text-yellow-300"})]}),e.jsxs("div",{className:"text-white/90 font-medium flex flex-wrap items-center gap-x-2 gap-y-1 text-sm",children:[e.jsx("span",{children:t("results.netAdvantage")}),e.jsxs("span",{className:"font-bold font-mono text-base sm:text-lg bg-white/20 px-2 py-0.5 rounded-lg border border-white/10 animate-pulse",children:["CHF ",c(h)]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-sm border border-slate-100 dark:border-slate-700 relative group transition-all hover:shadow-md",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-500"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-bold text-blue-700 dark:text-blue-400 uppercase tracking-widest mb-1 bg-blue-50 dark:bg-blue-900/20 px-2 py-0.5 rounded-full inline-block",children:t("results.liveInTicino")}),e.jsx("div",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:t("results.switzerland")})]}),e.jsx("img",{src:"https://flagcdn.com/w80/ch.png",className:"w-8 rounded opacity-90",alt:"CH",width:32,height:21})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50/50 dark:bg-blue-900/20 p-4 rounded-2xl border border-blue-100 dark:border-blue-800/50",children:[e.jsx("div",{className:"text-[10px] text-blue-700 dark:text-blue-400 font-bold uppercase mb-1",children:t("results.netMonthlyResidual")}),e.jsx("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:e.jsx(P,{value:l.netIncomeMonthly,currency:"CHF"})})]}),!o&&e.jsxs(e.Fragment,{children:[e.jsx(re,{data:l.breakdown,currency:"CHF"}),l.details.notes.length>0&&e.jsxs("div",{className:"mt-4 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-800",children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-slate-500 mb-1",children:t("results.notes")}),e.jsx("ul",{className:"text-xs text-slate-500 dark:text-slate-500 list-disc list-inside",children:l.details.notes.map((s,j)=>e.jsx("li",{children:t(s.split("|")[0])},j))})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-sm border border-slate-100 dark:border-slate-700 relative group transition-all hover:shadow-md",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-red-500"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-bold text-red-700 dark:text-red-400 uppercase tracking-widest mb-1 bg-red-50 dark:bg-red-900/20 px-2 py-0.5 rounded-full inline-block",children:t("results.liveInItaly")}),e.jsx("div",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:t("results.italy")})]}),e.jsx("img",{src:"https://flagcdn.com/w80/it.png",className:"w-8 rounded opacity-90",alt:"IT",width:32,height:21})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-red-50/50 dark:bg-red-900/20 p-4 rounded-2xl border border-red-100 dark:border-red-800/50",children:[e.jsx("div",{className:"text-[10px] text-red-700 dark:text-red-400 font-bold uppercase mb-1",children:t("results.netMonthlyResidual")}),e.jsx("div",{className:"text-2xl font-bold text-red-700 dark:text-red-300",children:e.jsx(P,{value:n.netIncomeMonthly,currency:"CHF"})})]}),!o&&e.jsxs(e.Fragment,{children:[e.jsx(re,{data:n.breakdown,currency:"CHF",showEUR:!0}),n.swissNetIncomeMonthlyCHF&&e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-2xl border border-slate-200 dark:border-slate-800 mt-2 relative overflow-hidden",children:[e.jsx("div",{className:"text-[10px] text-slate-500 dark:text-slate-500 font-bold uppercase mb-1 relative z-10",children:t("results.swissPayslipNet")}),e.jsx("div",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 relative z-10",children:e.jsx(P,{value:n.swissNetIncomeMonthlyCHF,currency:"CHF"})}),e.jsx("ul",{className:"mt-3 space-y-1.5 relative z-10",children:n.details.regime==="calc.regime.newFrontier"?e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"text-[10px] text-slate-500 dark:text-slate-500 font-medium flex items-center gap-1.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," ",t("results.concurrentTax")]}),n.details.franchigiaEUR?e.jsxs("li",{className:"text-[10px] text-slate-500 dark:text-slate-500 font-medium flex items-center gap-1.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"})," ",t("results.franchiseApplied",{amount:c(n.details.franchigiaEUR)})]}):null]}):e.jsxs("li",{className:"text-[10px] text-slate-500 dark:text-slate-500 font-medium flex items-center gap-1.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"})," ",t("results.exclusiveSwissTax")]})})]}),n.details.notes.length>0&&e.jsxs("div",{className:"mt-4 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-dashed border-slate-200 dark:border-slate-800",children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-slate-500 mb-1",children:t("results.notes")}),e.jsx("ul",{className:"text-xs text-slate-500 dark:text-slate-500 list-disc list-inside",children:n.details.notes.map((s,j)=>e.jsx("li",{children:t(s.split("|")[0])},j))})]})]})]})]})]}),!o&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-500 dark:text-slate-500 uppercase tracking-widest mb-6 flex items-center gap-2",children:[e.jsx(J,{size:14,className:"text-rose-500"})," ",t("results.whyConvenient")]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white dark:from-blue-900/10 dark:to-slate-900 p-6 rounded-3xl border border-blue-100 dark:border-blue-800 shadow-sm",children:[e.jsxs("h4",{className:"flex items-center gap-2 text-blue-700 dark:text-blue-400 font-bold mb-4",children:[e.jsx(Re,{size:18,className:"text-blue-500"})," ",t("results.chooseSwissIf")]}),e.jsxs("ul",{className:"space-y-3 text-xs text-slate-600 dark:text-slate-500 font-medium",children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx(w,{size:14,className:"text-blue-500 shrink-0"})," ",e.jsxs("span",{children:[e.jsx("b",{children:t("results.ch.quality.title")})," ",t("results.ch.quality")]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx(w,{size:14,className:"text-blue-500 shrink-0"})," ",e.jsxs("span",{children:[e.jsx("b",{children:t("results.ch.career.title")})," ",t("results.ch.career")]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx(w,{size:14,className:"text-blue-500 shrink-0"})," ",e.jsxs("span",{children:[e.jsx("b",{children:t("results.ch.time.title")})," ",t("results.ch.time")]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx(w,{size:14,className:"text-blue-500 shrink-0"})," ",e.jsxs("span",{children:[e.jsx("b",{children:t("results.ch.purchasing.title")})," ",t("results.ch.purchasing")]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-white dark:from-emerald-900/10 dark:to-slate-900 p-6 rounded-3xl border border-emerald-100 dark:border-emerald-800 shadow-sm",children:[e.jsxs("h4",{className:"flex items-center gap-2 text-emerald-700 dark:text-emerald-400 font-bold mb-4",children:[e.jsx(Me,{size:18,className:"text-emerald-500"})," ",t("results.chooseItalyIf")]}),e.jsxs("ul",{className:"space-y-3 text-xs text-slate-600 dark:text-slate-500 font-medium",children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx(w,{size:14,className:"text-emerald-500 shrink-0"})," ",e.jsxs("span",{children:[e.jsx("b",{children:t("results.it.cost.title")})," ",t("results.it.cost")]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx(w,{size:14,className:"text-emerald-500 shrink-0"})," ",e.jsxs("span",{children:[e.jsx("b",{children:t("results.it.property.title")})," ",t("results.it.property")]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx(w,{size:14,className:"text-emerald-500 shrink-0"})," ",e.jsxs("span",{children:[e.jsx("b",{children:t("results.it.social.title")})," ",t("results.it.social")]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx(w,{size:14,className:"text-emerald-500 shrink-0"})," ",e.jsxs("span",{children:[e.jsx("b",{children:t("results.it.tax.title")})," ",t("results.it.tax")]})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl flex gap-3",children:[e.jsx(he,{size:20,className:"text-amber-500 shrink-0"}),e.jsxs("div",{className:"text-[10px] text-amber-700 dark:text-amber-400 leading-relaxed font-medium",children:[e.jsx("b",{children:t("results.notaBene")})," ",t("results.disclaimer.housing")]})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-500 dark:text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsx(me,{size:14,className:"text-indigo-500"})," ",t("results.monthlyReservesChart")]}),e.jsx(We,{result:x,inputs:a,isDarkMode:r,isFocusMode:o})]})]})]})};export{Ye as ResultsView};
//# sourceMappingURL=ResultsView-DK0oeX7R.js.map
