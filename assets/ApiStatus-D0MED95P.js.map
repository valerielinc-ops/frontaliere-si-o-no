{"version":3,"file":"ApiStatus-D0MED95P.js","sources":["../../node_modules/lucide-react/dist/esm/icons/key.js","../../components/ApiStatus.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4\", key: \"g0fldk\" }],\n  [\"path\", { d: \"m21 2-9.6 9.6\", key: \"1j0ho8\" }],\n  [\"circle\", { cx: \"7.5\", cy: \"15.5\", r: \"5.5\", key: \"yqb3hr\" }]\n];\nconst Key = createLucideIcon(\"key\", __iconNode);\n\nexport { __iconNode, Key as default };\n//# sourceMappingURL=key.js.map\n","import React, { useState, useEffect } from 'react';\nimport { CheckCircle2, XCircle, AlertTriangle, Key, RefreshCw, ExternalLink } from 'lucide-react';\nimport { trafficService } from '../services/trafficService';\nimport { getConfigValue } from '../services/firebase';\n\ninterface ApiCheck {\n  name: string;\n  key: string;\n  configured: boolean;\n  value?: string;\n  status: 'success' | 'warning' | 'error';\n  message: string;\n  testUrl?: string;\n}\n\nconst ApiStatus: React.FC = () => {\n  const [apiChecks, setApiChecks] = useState<ApiCheck[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [lastCheck, setLastCheck] = useState<Date>(new Date());\n\n  const checkApis = async () => {\n    setLoading(true);\n    const checks: ApiCheck[] = [];\n\n    // 1. Google Maps API\n    const hasMapsKey = trafficService.hasApiKey();\n    checks.push({\n      name: 'Google Maps Distance Matrix API',\n      key: '****',\n      configured: hasMapsKey,\n      value: hasMapsKey ? 'âœ“ Configurata' : 'âœ— Non configurata',\n      status: hasMapsKey ? 'success' : 'warning',\n      message: hasMapsKey \n        ? 'Configurata correttamente - Traffico valichi usa dati reali'\n        : 'Non configurata - Traffico valichi usa dati simulati',\n      testUrl: 'https://console.cloud.google.com/apis/api/distance_matrix_backend.googleapis.com'\n    });\n\n    // 2. Google Gemini API - Carica da Firebase Remote Config\n    const geminiKey = await getConfigValue('GEMINI_API_KEY');\n    const hasGemini = !!geminiKey && geminiKey !== 'your_gemini_api_key_here' && geminiKey !== '';\n    checks.push({\n      name: 'Google Gemini API',\n      key: '****',\n      configured: hasGemini,\n      value: hasGemini ? 'âœ“ Configurata' : 'âœ— Non configurata',\n      status: hasGemini ? 'success' : 'warning',\n      message: hasGemini\n        ? 'Configurata correttamente - FunzionalitÃ  AI attive nel feedback'\n        : 'Non configurata - FunzionalitÃ  AI nel feedback disabilitate',\n      testUrl: 'https://aistudio.google.com/app/apikey'\n    });\n\n    // 3. GitHub PAT - Carica da Firebase Remote Config\n    const githubPat = await getConfigValue('GITHUB_PAT');\n    const hasGithub = !!githubPat && githubPat !== 'your_github_pat_here' && githubPat !== '';\n    checks.push({\n      name: 'GitHub Personal Access Token',\n      key: '****',\n      configured: hasGithub,\n      value: hasGithub ? 'âœ“ Configurato' : 'âœ— Non configurato',\n      status: hasGithub ? 'success' : 'warning',\n      message: hasGithub\n        ? 'Configurato correttamente - Issue tracking GitHub attivo'\n        : 'Non configurato - Issue tracking GitHub disabilitato',\n      testUrl: 'https://github.com/settings/tokens'\n    });\n\n    // 4. Google OAuth Client ID - carica da Firebase Remote Config\n    const oauthClientId = await getConfigValue('GOOGLE_OAUTH_CLIENT_ID');\n    const hasOAuth = !!oauthClientId && oauthClientId !== '' && oauthClientId !== 'your_google_oauth_client_id_here';\n    checks.push({\n      name: 'Google OAuth Client ID',\n      key: '****',\n      configured: hasOAuth,\n      value: hasOAuth ? 'âœ“ Configurato' : 'âœ— Non configurato',\n      status: hasOAuth ? 'success' : 'warning',\n      message: hasOAuth\n        ? 'Configurato correttamente - Pronto per autenticazione OAuth'\n        : 'Non configurato - Autenticazione OAuth non disponibile',\n      testUrl: 'https://console.cloud.google.com/apis/credentials'\n    });\n\n    setApiChecks(checks);\n    setLastCheck(new Date());\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    checkApis();\n  }, []);\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'success':\n        return <CheckCircle2 className=\"text-green-600 dark:text-green-400\" size={24} />;\n      case 'warning':\n        return <AlertTriangle className=\"text-amber-600 dark:text-amber-400\" size={24} />;\n      case 'error':\n        return <XCircle className=\"text-red-600 dark:text-red-400\" size={24} />;\n      default:\n        return <AlertTriangle className=\"text-slate-500\" size={24} />;\n    }\n  };\n\n  const successCount = apiChecks.filter(c => c.status === 'success').length;\n  const warningCount = apiChecks.filter(c => c.status === 'warning').length;\n  const errorCount = apiChecks.filter(c => c.status === 'error').length;\n\n  return (\n    <div className=\"space-y-6 pb-8\">\n      {/* Header */}\n      <div className=\"bg-gradient-to-br from-slate-700 to-slate-900 rounded-2xl p-8 text-white\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <Key size={32} />\n          <h2 className=\"text-3xl font-extrabold\">Diagnostica API</h2>\n        </div>\n        <p className=\"text-slate-300 text-lg\">\n          Verifica lo stato di configurazione delle API esterne\n        </p>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid md:grid-cols-3 gap-4\">\n        <div className=\"bg-green-50 dark:bg-green-950/30 border-2 border-green-200 dark:border-green-800 rounded-xl p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-green-700 dark:text-green-400 font-medium\">Configurate</p>\n              <p className=\"text-3xl font-bold text-green-900 dark:text-green-200\">{successCount}</p>\n            </div>\n            <CheckCircle2 className=\"text-green-600 dark:text-green-400\" size={32} />\n          </div>\n        </div>\n\n        <div className=\"bg-amber-50 dark:bg-amber-950/30 border-2 border-amber-200 dark:border-amber-800 rounded-xl p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-amber-700 dark:text-amber-400 font-medium\">Non Configurate</p>\n              <p className=\"text-3xl font-bold text-amber-900 dark:text-amber-200\">{warningCount}</p>\n            </div>\n            <AlertTriangle className=\"text-amber-600 dark:text-amber-400\" size={32} />\n          </div>\n        </div>\n\n        <div className=\"bg-red-50 dark:bg-red-950/30 border-2 border-red-200 dark:border-red-800 rounded-xl p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-red-700 dark:text-red-400 font-medium\">Errori</p>\n              <p className=\"text-3xl font-bold text-red-900 dark:text-red-200\">{errorCount}</p>\n            </div>\n            <XCircle className=\"text-red-600 dark:text-red-400\" size={32} />\n          </div>\n        </div>\n      </div>\n\n      {/* Refresh Button */}\n      <div className=\"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-sm text-slate-600 dark:text-slate-500\">\n            Ultimo controllo: {lastCheck.toLocaleTimeString('it-IT')}\n          </div>\n          <button\n            onClick={checkApis}\n            disabled={loading}\n            className=\"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-800 text-white rounded-lg transition-colors disabled:opacity-50\"\n          >\n            <RefreshCw size={16} className={loading ? 'animate-spin' : ''} />\n            Ricontrolla\n          </button>\n        </div>\n      </div>\n\n      {/* API Status List */}\n      <div className=\"space-y-4\">\n        {apiChecks.map((check, index) => (\n          <div\n            key={index}\n            className={`bg-white dark:bg-slate-800 border-2 rounded-xl p-6 ${\n              check.status === 'success'\n                ? 'border-green-200 dark:border-green-800'\n                : check.status === 'warning'\n                ? 'border-amber-200 dark:border-amber-800'\n                : 'border-red-200 dark:border-red-800'\n            }`}\n          >\n            <div className=\"flex items-start gap-4\">\n              {getStatusIcon(check.status)}\n              <div className=\"flex-1\">\n                <div className=\"flex items-start justify-between mb-2\">\n                  <h3 className=\"font-bold text-lg text-slate-900 dark:text-slate-100\">\n                    {check.name}\n                  </h3>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <p className={`text-sm font-medium ${\n                    check.status === 'success'\n                      ? 'text-green-700 dark:text-green-400'\n                      : check.status === 'warning'\n                      ? 'text-amber-700 dark:text-amber-400'\n                      : 'text-red-700 dark:text-red-400'\n                  }`}>\n                    {check.value}\n                  </p>\n                  <p className=\"text-sm text-slate-600 dark:text-slate-500\">\n                    {check.message}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Info Note */}\n      <div className=\"bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 p-6 rounded-xl\">\n        <p className=\"text-sm text-slate-600 dark:text-slate-500 text-center\">\n          ðŸ”’ <strong>Privacy:</strong> I dettagli delle chiavi API sono nascosti per motivi di sicurezza.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default ApiStatus;\n"],"names":["__iconNode","Key","createLucideIcon","ApiStatus","apiChecks","setApiChecks","useState","loading","setLoading","lastCheck","setLastCheck","checkApis","checks","hasMapsKey","trafficService","geminiKey","getConfigValue","hasGemini","githubPat","hasGithub","oauthClientId","hasOAuth","useEffect","getStatusIcon","status","jsx","CheckCircle2","AlertTriangle","XCircle","successCount","c","warningCount","errorCount","jsxs","RefreshCw","check","index"],"mappings":"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","x_google_ignoreList":[0]}