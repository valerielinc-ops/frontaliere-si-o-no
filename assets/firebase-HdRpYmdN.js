import{r as C,t as g,v as A,x as d,y as w,z as h,A as m,R as y}from"./vendor-firebase-BMmHVpWp.js";const E="JztKDydNL0lRMwFyR3MKcyFaPABJPEF4I2lwFGxORhwwVgkHPyFT",z="fr0nt4l13r3-t1c1n0";function R(e,n){const i=Uint8Array.from(atob(e),t=>t.charCodeAt(0));let o="";for(let t=0;t<i.length;t++)o+=String.fromCharCode(i[t]^n.charCodeAt(t%n.length));return o}const P={apiKey:R(E,z),authDomain:"frontaliere-ticino.firebaseapp.com",projectId:"frontaliere-ticino",storageBucket:"frontaliere-ticino.firebasestorage.app",messagingSenderId:"957502085858",appId:"1:957502085858:web:4941e8997ebf75b0145cbb",measurementId:"G-G1E84HYGB7"},s=w(P),H=h(s);let c=null,a=null,u=!1;async function T(e){if(!u)return new Promise((n,i)=>{var p;const o=document.createElement("script");o.src=`https://www.google.com/recaptcha/enterprise.js?render=${e}`,o.async=!0,o.defer=!0,o.onload=()=>{u=!0,console.log("‚úÖ reCAPTCHA script caricato dinamicamente"),n()},o.onerror=()=>{console.error("‚ùå Errore caricamento script reCAPTCHA"),i(new Error("Failed to load reCAPTCHA script"))};const t=document.getElementById("recaptcha-loader");t?(p=t.parentNode)==null||p.insertBefore(o,t.nextSibling):document.head.appendChild(o)})}async function b(e=50,n=100){for(let i=0;i<e;i++){if(typeof window<"u"&&typeof window.grecaptcha<"u"&&typeof window.grecaptcha.ready=="function")return!0;await new Promise(o=>setTimeout(o,n))}return!1}async function I(){if(!(typeof window>"u"||c!==null))try{if(a=await _("RECAPTCHA_SITE_KEY"),!a){console.warn("‚ö†Ô∏è RECAPTCHA_SITE_KEY non trovata in Remote Config");return}if(console.log("üîë reCAPTCHA Site Key caricata da Firebase Remote Config"),await T(a),console.log("‚è≥ Attendo inizializzazione reCAPTCHA..."),!await b()){console.warn("‚ö†Ô∏è reCAPTCHA non disponibile dopo 5 secondi");return}console.log("‚úÖ reCAPTCHA pronto"),c=m(s,{provider:new y(a),isTokenAutoRefreshEnabled:!0}),console.log("‚úÖ Firebase App Check inizializzato con reCAPTCHA v3")}catch(e){console.warn("‚ö†Ô∏è App Check non disponibile:",e)}}let r=null,l=!1;async function f(){if(!(l||typeof window>"u"))try{if(!await g()){console.warn("‚ö†Ô∏è Remote Config non supportato in questo ambiente");return}r=A(s),r.defaultConfig={GOOGLE_MAPS_API_KEY:"",GA_MEASUREMENT_ID:"",GITHUB_PAT:"",GEMINI_API_KEY:"",RECAPTCHA_SITE_KEY:""},r.settings={minimumFetchIntervalMillis:36e5,fetchTimeoutMillis:6e4},await d(r),l=!0,console.log("‚úÖ Firebase Remote Config inizializzato e attivato")}catch(e){console.warn("‚ö†Ô∏è Errore inizializzazione Remote Config:",e),console.log("üìå Utilizzo valori di default locali")}}async function _(e){l||await f();try{if(r)return C(r,e).asString()}catch(n){console.warn(`‚ö†Ô∏è Errore recupero config "${e}":`,n)}return console.warn(`‚ö†Ô∏è Config key "${e}" not available from Remote Config`),""}async function v(){try{return r||await f(),r?(await d(r),console.log("‚úÖ Remote Config aggiornato"),!0):!1}catch(e){return console.error("‚ùå Errore refresh Remote Config:",e),!1}}function F(){return c!==null}typeof window<"u"&&f().then(()=>I()).catch(e=>{console.error("Errore auto-inizializzazione Firebase:",e)});export{H as analytics,s as app,c as appCheck,_ as getConfigValue,F as isAppCheckActive,v as refreshRemoteConfig,r as remoteConfig};
//# sourceMappingURL=firebase-HdRpYmdN.js.map
