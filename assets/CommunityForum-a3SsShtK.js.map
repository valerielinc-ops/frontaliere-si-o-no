{"version":3,"file":"CommunityForum-a3SsShtK.js","sources":["../../node_modules/lucide-react/dist/esm/icons/log-in.js","../../node_modules/lucide-react/dist/esm/icons/message-circle.js","../../node_modules/lucide-react/dist/esm/icons/tag.js","../../node_modules/lucide-react/dist/esm/icons/thumbs-up.js","../../components/CommunityForum.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m10 17 5-5-5-5\", key: \"1bsop3\" }],\n  [\"path\", { d: \"M15 12H3\", key: \"6jk70r\" }],\n  [\"path\", { d: \"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4\", key: \"u53s6r\" }]\n];\nconst LogIn = createLucideIcon(\"log-in\", __iconNode);\n\nexport { __iconNode, LogIn as default };\n//# sourceMappingURL=log-in.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719\",\n      key: \"1sd12s\"\n    }\n  ]\n];\nconst MessageCircle = createLucideIcon(\"message-circle\", __iconNode);\n\nexport { __iconNode, MessageCircle as default };\n//# sourceMappingURL=message-circle.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\",\n      key: \"vktsd0\"\n    }\n  ],\n  [\"circle\", { cx: \"7.5\", cy: \"7.5\", r: \".5\", fill: \"currentColor\", key: \"kqv944\" }]\n];\nconst Tag = createLucideIcon(\"tag\", __iconNode);\n\nexport { __iconNode, Tag as default };\n//# sourceMappingURL=tag.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z\",\n      key: \"emmmcr\"\n    }\n  ],\n  [\"path\", { d: \"M7 10v12\", key: \"1qc93n\" }]\n];\nconst ThumbsUp = createLucideIcon(\"thumbs-up\", __iconNode);\n\nexport { __iconNode, ThumbsUp as default };\n//# sourceMappingURL=thumbs-up.js.map\n","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useTranslation } from '@/services/i18n';\nimport { useAuth, getUserDisplayName, getUserPhotoURL } from '@/services/authService';\nimport {\n  getQuestions,\n  getAnswers,\n  createQuestion,\n  createAnswer,\n  upvoteQuestion,\n  upvoteAnswer,\n  FORUM_CATEGORIES,\n  ForumQuestion,\n  ForumAnswer,\n  ForumCategory,\n} from '@/services/firestoreService';\nimport { unlockAchievement } from '@/components/GamificationWidget';\nimport { Analytics } from '@/services/analytics';\nimport {\n  MessageSquare, ThumbsUp, Send, ArrowLeft, Tag, Filter,\n  Plus, User, Clock, ChevronDown, LogIn, AlertCircle,\n  MessageCircle, TrendingUp, Loader2, CheckCircle2,\n} from 'lucide-react';\n\n// ‚îÄ‚îÄ‚îÄ Category Config ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\nconst CATEGORY_ICONS: Record<string, string> = {\n  fiscalita: 'üí∞',\n  permessi: 'üìã',\n  assicurazioni: 'üè•',\n  pensione: 'üè¶',\n  trasporti: 'üöó',\n  residenza: 'üè†',\n  lavoro: 'üíº',\n  famiglia: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶',\n  generale: 'üí¨',\n};\n\nconst CATEGORY_COLORS: Record<string, string> = {\n  fiscalita: 'bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400',\n  permessi: 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400',\n  assicurazioni: 'bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400',\n  pensione: 'bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400',\n  trasporti: 'bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400',\n  residenza: 'bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400',\n  lavoro: 'bg-cyan-100 text-cyan-700 dark:bg-cyan-900/30 dark:text-cyan-400',\n  famiglia: 'bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-400',\n  generale: 'bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300',\n};\n\n// ‚îÄ‚îÄ‚îÄ Time formatting ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\nfunction timeAgo(date: Date | null): string {\n  if (!date) return '';\n  const seconds = Math.floor((Date.now() - date.getTime()) / 1000);\n  if (seconds < 60) return 'adesso';\n  if (seconds < 3600) return `${Math.floor(seconds / 60)} min fa`;\n  if (seconds < 86400) return `${Math.floor(seconds / 3600)}h fa`;\n  if (seconds < 2592000) return `${Math.floor(seconds / 86400)}g fa`;\n  return date.toLocaleDateString('it-IT', { day: 'numeric', month: 'short' });\n}\n\n// ‚îÄ‚îÄ‚îÄ Component ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\nconst CommunityForum: React.FC = () => {\n  const { t } = useTranslation();\n  const { user, signIn } = useAuth();\n\n  // State\n  const [questions, setQuestions] = useState<ForumQuestion[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedCategory, setSelectedCategory] = useState<ForumCategory | ''>('');\n  const [sortBy, setSortBy] = useState<'recent' | 'popular'>('recent');\n\n  // Detail view\n  const [selectedQuestion, setSelectedQuestion] = useState<ForumQuestion | null>(null);\n  const [answers, setAnswers] = useState<ForumAnswer[]>([]);\n  const [loadingAnswers, setLoadingAnswers] = useState(false);\n\n  // New question form\n  const [showNewForm, setShowNewForm] = useState(false);\n  const [newTitle, setNewTitle] = useState('');\n  const [newBody, setNewBody] = useState('');\n  const [newCategory, setNewCategory] = useState<ForumCategory>('generale');\n  const [newTags, setNewTags] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n\n  // New answer\n  const [newAnswer, setNewAnswer] = useState('');\n  const [submittingAnswer, setSubmittingAnswer] = useState(false);\n\n  // ‚îÄ‚îÄ‚îÄ Load questions ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n  const loadQuestions = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const qs = await getQuestions({\n        category: selectedCategory || undefined,\n        sortBy,\n      });\n      setQuestions(qs);\n    } catch (e) {\n      console.warn('Failed to load questions:', e);\n      setError(t('forum.loadError') || 'Errore nel caricamento delle domande');\n    } finally {\n      setLoading(false);\n    }\n  }, [selectedCategory, sortBy, t]);\n\n  useEffect(() => {\n    loadQuestions();\n  }, [loadQuestions]);\n\n  // ‚îÄ‚îÄ‚îÄ Load answers for a question ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n  const openQuestion = useCallback(async (q: ForumQuestion) => {\n    setSelectedQuestion(q);\n    setLoadingAnswers(true);\n    try {\n      const ans = await getAnswers(q.id);\n      setAnswers(ans);\n    } catch (e) {\n      console.warn('Failed to load answers:', e);\n    } finally {\n      setLoadingAnswers(false);\n    }\n    Analytics.trackUIInteraction('forum', 'question', 'view', q.id);\n  }, []);\n\n  // ‚îÄ‚îÄ‚îÄ Create question ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n  const handleCreateQuestion = useCallback(async () => {\n    if (!user || !newTitle.trim() || !newBody.trim()) return;\n    setSubmitting(true);\n    try {\n      await createQuestion({\n        title: newTitle.trim(),\n        body: newBody.trim(),\n        authorId: user.uid,\n        authorName: getUserDisplayName(user),\n        authorPhoto: getUserPhotoURL(user),\n        category: newCategory,\n        tags: newTags.split(',').map(t => t.trim()).filter(Boolean),\n      });\n      setNewTitle('');\n      setNewBody('');\n      setNewTags('');\n      setShowNewForm(false);\n      unlockAchievement('forum_first_question');\n      await loadQuestions();\n      Analytics.trackUIInteraction('forum', 'question', 'create', newCategory);\n    } catch (e) {\n      console.warn('Failed to create question:', e);\n    } finally {\n      setSubmitting(false);\n    }\n  }, [user, newTitle, newBody, newCategory, newTags, loadQuestions]);\n\n  // ‚îÄ‚îÄ‚îÄ Create answer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n  const handleCreateAnswer = useCallback(async () => {\n    if (!user || !selectedQuestion || !newAnswer.trim()) return;\n    setSubmittingAnswer(true);\n    try {\n      await createAnswer({\n        questionId: selectedQuestion.id,\n        body: newAnswer.trim(),\n        authorId: user.uid,\n        authorName: getUserDisplayName(user),\n        authorPhoto: getUserPhotoURL(user),\n      });\n      setNewAnswer('');\n      // Reload answers\n      const ans = await getAnswers(selectedQuestion.id);\n      setAnswers(ans);\n      // Update answer count locally\n      setSelectedQuestion(prev => prev ? { ...prev, answerCount: prev.answerCount + 1 } : null);\n      unlockAchievement('forum_first_answer');\n      Analytics.trackUIInteraction('forum', 'answer', 'create', selectedQuestion.id);\n    } catch (e) {\n      console.warn('Failed to create answer:', e);\n    } finally {\n      setSubmittingAnswer(false);\n    }\n  }, [user, selectedQuestion, newAnswer]);\n\n  // ‚îÄ‚îÄ‚îÄ Upvote ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n  const handleUpvoteQuestion = useCallback(async (qId: string) => {\n    if (!user) return;\n    try {\n      await upvoteQuestion(qId, user.uid);\n      setQuestions(prev =>\n        prev.map(q => {\n          if (q.id !== qId) return q;\n          const already = q.upvotedBy.includes(user.uid);\n          return {\n            ...q,\n            upvotes: already ? q.upvotes - 1 : q.upvotes + 1,\n            upvotedBy: already ? q.upvotedBy.filter(id => id !== user.uid) : [...q.upvotedBy, user.uid],\n          };\n        })\n      );\n    } catch (e) {\n      console.warn('Upvote failed:', e);\n    }\n  }, [user]);\n\n  const handleUpvoteAnswer = useCallback(async (aId: string) => {\n    if (!user) return;\n    try {\n      await upvoteAnswer(aId, user.uid);\n      setAnswers(prev =>\n        prev.map(a => {\n          if (a.id !== aId) return a;\n          const already = a.upvotedBy.includes(user.uid);\n          return {\n            ...a,\n            upvotes: already ? a.upvotes - 1 : a.upvotes + 1,\n            upvotedBy: already ? a.upvotedBy.filter(id => id !== user.uid) : [...a.upvotedBy, user.uid],\n          };\n        })\n      );\n    } catch (e) {\n      console.warn('Upvote answer failed:', e);\n    }\n  }, [user]);\n\n  // ‚îÄ‚îÄ‚îÄ Question Detail View ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n  if (selectedQuestion) {\n    return (\n      <div className=\"space-y-6\">\n        {/* Back button */}\n        <button\n          onClick={() => { setSelectedQuestion(null); setAnswers([]); }}\n          className=\"flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 transition-colors\"\n        >\n          <ArrowLeft className=\"w-4 h-4\" />\n          {t('forum.backToList') || 'Torna alle domande'}\n        </button>\n\n        {/* Question card */}\n        <div className=\"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden\">\n          <div className=\"p-6\">\n            <div className=\"flex items-start gap-4\">\n              {/* Upvote */}\n              <div className=\"flex flex-col items-center gap-1\">\n                <button\n                  onClick={() => handleUpvoteQuestion(selectedQuestion.id)}\n                  disabled={!user}\n                  className={`p-1.5 rounded-lg transition-colors ${\n                    user && selectedQuestion.upvotedBy.includes(user.uid)\n                      ? 'bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400'\n                      : 'text-slate-300 hover:text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20'\n                  } ${!user ? 'opacity-50 cursor-not-allowed' : ''}`}\n                >\n                  <ThumbsUp className=\"w-5 h-5\" />\n                </button>\n                <span className=\"text-sm font-black text-slate-600 dark:text-slate-300\">{selectedQuestion.upvotes}</span>\n              </div>\n\n              {/* Content */}\n              <div className=\"flex-1 min-w-0\">\n                <h2 className=\"text-xl font-black text-slate-800 dark:text-slate-100 mb-2\">\n                  {selectedQuestion.title}\n                </h2>\n                <p className=\"text-sm text-slate-600 dark:text-slate-500 whitespace-pre-wrap leading-relaxed\">\n                  {selectedQuestion.body}\n                </p>\n                <div className=\"flex flex-wrap items-center gap-2 mt-4\">\n                  <span className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-bold ${CATEGORY_COLORS[selectedQuestion.category] || CATEGORY_COLORS.generale}`}>\n                    {CATEGORY_ICONS[selectedQuestion.category]} {t(`forum.cat.${selectedQuestion.category}`)}\n                  </span>\n                  {selectedQuestion.tags.map(tag => (\n                    <span key={tag} className=\"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 text-slate-500 rounded text-[10px]\">\n                      <Tag className=\"w-2.5 h-2.5\" />{tag}\n                    </span>\n                  ))}\n                </div>\n                <div className=\"flex items-center gap-3 mt-3 text-xs text-slate-500\">\n                  {selectedQuestion.authorPhoto ? (\n                    <img src={selectedQuestion.authorPhoto} alt=\"\" className=\"w-5 h-5 rounded-full\" referrerPolicy=\"no-referrer\" />\n                  ) : (\n                    <User className=\"w-4 h-4\" />\n                  )}\n                  <span className=\"font-bold\">{selectedQuestion.authorName}</span>\n                  <span className=\"flex items-center gap-1\"><Clock className=\"w-3 h-3\" />{timeAgo(selectedQuestion.createdAt?.toDate() || null)}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Answers */}\n        <div>\n          <h3 className=\"font-bold text-sm text-slate-600 dark:text-slate-300 mb-3 flex items-center gap-2\">\n            <MessageCircle className=\"w-4 h-4\" />\n            {selectedQuestion.answerCount} {t('forum.answers') || 'Risposte'}\n          </h3>\n\n          {loadingAnswers ? (\n            <div className=\"text-center py-8 text-slate-500\">\n              <Loader2 className=\"w-6 h-6 animate-spin mx-auto mb-2\" />\n            </div>\n          ) : answers.length === 0 ? (\n            <div className=\"text-center py-8 text-slate-500 text-sm\">\n              {t('forum.noAnswers') || 'Nessuna risposta ancora. Sii il primo!'}\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {answers.map(answer => (\n                <div key={answer.id} className={`bg-white dark:bg-slate-800 rounded-xl border p-4 ${\n                  answer.accepted ? 'border-emerald-300 dark:border-emerald-700 bg-emerald-50/50 dark:bg-emerald-950/10' : 'border-slate-200 dark:border-slate-700'\n                }`}>\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"flex flex-col items-center gap-1\">\n                      <button\n                        onClick={() => handleUpvoteAnswer(answer.id)}\n                        disabled={!user}\n                        className={`p-1 rounded-lg transition-colors ${\n                          user && answer.upvotedBy.includes(user.uid)\n                            ? 'bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400'\n                            : 'text-slate-300 hover:text-emerald-500'\n                        } ${!user ? 'opacity-50 cursor-not-allowed' : ''}`}\n                      >\n                        <ThumbsUp className=\"w-4 h-4\" />\n                      </button>\n                      <span className=\"text-xs font-bold text-slate-500\">{answer.upvotes}</span>\n                      {answer.accepted && <CheckCircle2 className=\"w-4 h-4 text-emerald-500\" />}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed\">\n                        {answer.body}\n                      </p>\n                      <div className=\"flex items-center gap-2 mt-2 text-[11px] text-slate-500\">\n                        {answer.authorPhoto ? (\n                          <img src={answer.authorPhoto} alt=\"\" className=\"w-4 h-4 rounded-full\" referrerPolicy=\"no-referrer\" />\n                        ) : (\n                          <User className=\"w-3.5 h-3.5\" />\n                        )}\n                        <span className=\"font-bold\">{answer.authorName}</span>\n                        <span>{timeAgo(answer.createdAt?.toDate() || null)}</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* New answer form */}\n        {user ? (\n          <div className=\"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4\">\n            <textarea\n              value={newAnswer}\n              onChange={(e) => setNewAnswer(e.target.value)}\n              placeholder={t('forum.answerPlaceholder') || 'Scrivi la tua risposta...'}\n              className=\"w-full px-3 py-2 rounded-lg bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-sm min-h-[80px] resize-y\"\n            />\n            <div className=\"flex justify-end mt-2\">\n              <button\n                onClick={handleCreateAnswer}\n                disabled={submittingAnswer || !newAnswer.trim()}\n                className=\"flex items-center gap-1.5 px-4 py-2 bg-sky-600 text-white rounded-lg text-sm font-bold hover:bg-sky-700 disabled:opacity-50 transition-colors\"\n              >\n                {submittingAnswer ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Send className=\"w-3.5 h-3.5\" />}\n                {t('forum.submitAnswer') || 'Rispondi'}\n              </button>\n            </div>\n          </div>\n        ) : (\n          <div className=\"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4 text-center\">\n            <button onClick={signIn} className=\"flex items-center gap-2 mx-auto px-4 py-2 bg-sky-600 text-white rounded-lg text-sm font-bold hover:bg-sky-700 transition-colors\">\n              <LogIn className=\"w-4 h-4\" />\n              {t('forum.loginToAnswer') || 'Accedi per rispondere'}\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  // ‚îÄ‚îÄ‚îÄ Questions List View ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-gradient-to-br from-violet-50 to-purple-50 dark:from-violet-950/30 dark:to-purple-950/30 rounded-2xl p-6 border border-violet-200 dark:border-violet-800\">\n        <div className=\"flex items-center gap-3 mb-2\">\n          <div className=\"p-2 bg-violet-100 dark:bg-violet-900/50 rounded-xl\">\n            <MessageSquare className=\"w-6 h-6 text-violet-600 dark:text-violet-400\" />\n          </div>\n          <h2 className=\"text-2xl font-bold text-violet-900 dark:text-violet-100\">{t('forum.title')}</h2>\n        </div>\n        <p className=\"text-violet-700 dark:text-violet-300 text-sm\">{t('forum.subtitle')}</p>\n      </div>\n\n      {/* Controls */}\n      <div className=\"flex flex-col sm:flex-row gap-3\">\n        {/* Category filter */}\n        <div className=\"flex-1 flex items-center gap-2\">\n          <Filter className=\"w-4 h-4 text-slate-500 shrink-0\" />\n          <select\n            value={selectedCategory}\n            onChange={(e) => setSelectedCategory(e.target.value as ForumCategory | '')}\n            className=\"flex-1 px-3 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm font-bold\"\n          >\n            <option value=\"\">{t('forum.allCategories') || 'Tutte le categorie'}</option>\n            {FORUM_CATEGORIES.map(cat => (\n              <option key={cat} value={cat}>\n                {CATEGORY_ICONS[cat]} {t(`forum.cat.${cat}`)}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* Sort */}\n        <div className=\"flex gap-1 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-0.5\">\n          <button\n            onClick={() => setSortBy('recent')}\n            className={`flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-bold transition-colors ${\n              sortBy === 'recent' ? 'bg-violet-100 text-violet-700 dark:bg-violet-900/30 dark:text-violet-400' : 'text-slate-500'\n            }`}\n          >\n            <Clock className=\"w-3 h-3\" /> {t('forum.recent') || 'Recenti'}\n          </button>\n          <button\n            onClick={() => setSortBy('popular')}\n            className={`flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-bold transition-colors ${\n              sortBy === 'popular' ? 'bg-violet-100 text-violet-700 dark:bg-violet-900/30 dark:text-violet-400' : 'text-slate-500'\n            }`}\n          >\n            <TrendingUp className=\"w-3 h-3\" /> {t('forum.popular') || 'Popolari'}\n          </button>\n        </div>\n\n        {/* New question button */}\n        {user ? (\n          <button\n            onClick={() => setShowNewForm(!showNewForm)}\n            className=\"flex items-center gap-2 px-4 py-2.5 bg-violet-600 text-white rounded-xl text-sm font-bold hover:bg-violet-700 transition-colors\"\n          >\n            <Plus className=\"w-4 h-4\" />\n            {t('forum.askQuestion') || 'Fai una domanda'}\n          </button>\n        ) : (\n          <button\n            onClick={signIn}\n            className=\"flex items-center gap-2 px-4 py-2.5 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl text-sm font-bold hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors\"\n          >\n            <LogIn className=\"w-4 h-4\" />\n            {t('forum.loginToAsk') || 'Accedi per chiedere'}\n          </button>\n        )}\n      </div>\n\n      {/* New question form */}\n      {showNewForm && user && (\n        <div className=\"bg-white dark:bg-slate-800 rounded-xl border border-violet-200 dark:border-violet-800 p-5 space-y-3\">\n          <input\n            type=\"text\"\n            value={newTitle}\n            onChange={(e) => setNewTitle(e.target.value)}\n            placeholder={t('forum.titlePlaceholder') || 'Titolo della domanda...'}\n            className=\"w-full px-4 py-2.5 rounded-lg bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-sm font-bold\"\n            maxLength={200}\n          />\n          <textarea\n            value={newBody}\n            onChange={(e) => setNewBody(e.target.value)}\n            placeholder={t('forum.bodyPlaceholder') || 'Descrivi la tua domanda in dettaglio...'}\n            className=\"w-full px-4 py-2.5 rounded-lg bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-sm min-h-[120px] resize-y\"\n          />\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n            <div>\n              <label className=\"block text-xs font-bold text-slate-500 mb-1\">{t('forum.category') || 'Categoria'}</label>\n              <select\n                value={newCategory}\n                onChange={(e) => setNewCategory(e.target.value as ForumCategory)}\n                className=\"w-full px-3 py-2 rounded-lg bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-sm\"\n              >\n                {FORUM_CATEGORIES.map(cat => (\n                  <option key={cat} value={cat}>{CATEGORY_ICONS[cat]} {t(`forum.cat.${cat}`)}</option>\n                ))}\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-slate-500 mb-1\">{t('forum.tags') || 'Tag (separati da virgola)'}</label>\n              <input\n                type=\"text\"\n                value={newTags}\n                onChange={(e) => setNewTags(e.target.value)}\n                placeholder=\"es: tasse, permesso G, ticino\"\n                className=\"w-full px-3 py-2 rounded-lg bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-sm\"\n              />\n            </div>\n          </div>\n          <div className=\"flex justify-end gap-2\">\n            <button\n              onClick={() => setShowNewForm(false)}\n              className=\"px-4 py-2 text-sm font-bold text-slate-500 hover:text-slate-700 transition-colors\"\n            >\n              {t('forum.cancel') || 'Annulla'}\n            </button>\n            <button\n              onClick={handleCreateQuestion}\n              disabled={submitting || !newTitle.trim() || !newBody.trim()}\n              className=\"flex items-center gap-1.5 px-4 py-2 bg-violet-600 text-white rounded-lg text-sm font-bold hover:bg-violet-700 disabled:opacity-50 transition-colors\"\n            >\n              {submitting ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Send className=\"w-3.5 h-3.5\" />}\n              {t('forum.submit') || 'Pubblica'}\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Questions list */}\n      {loading ? (\n        <div className=\"text-center py-12 text-slate-500\">\n          <Loader2 className=\"w-8 h-8 animate-spin mx-auto mb-2\" />\n          <p className=\"text-sm\">{t('forum.loading') || 'Caricamento domande...'}</p>\n        </div>\n      ) : error ? (\n        <div className=\"text-center py-12\">\n          <AlertCircle className=\"w-8 h-8 text-amber-500 mx-auto mb-2\" />\n          <p className=\"text-sm text-amber-600\">{error}</p>\n          <button onClick={loadQuestions} className=\"mt-3 text-sm font-bold text-violet-600 hover:text-violet-700\">\n            {t('forum.retry') || 'Riprova'}\n          </button>\n        </div>\n      ) : questions.length === 0 ? (\n        <div className=\"text-center py-12 text-slate-500\">\n          <MessageSquare className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n          <p className=\"font-bold\">{t('forum.empty') || 'Nessuna domanda ancora'}</p>\n          <p className=\"text-sm mt-1\">{t('forum.emptyDesc') || 'Sii il primo a fare una domanda alla community!'}</p>\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {questions.map(q => (\n            <button\n              key={q.id}\n              onClick={() => openQuestion(q)}\n              className=\"w-full text-left bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4 hover:border-violet-300 dark:hover:border-violet-700 transition-colors\"\n            >\n              <div className=\"flex items-start gap-3\">\n                {/* Upvotes */}\n                <div className=\"flex flex-col items-center gap-0.5 pt-0.5\">\n                  <ThumbsUp className={`w-4 h-4 ${user && q.upvotedBy.includes(user.uid) ? 'text-emerald-500' : 'text-slate-300'}`} />\n                  <span className=\"text-xs font-black text-slate-500\">{q.upvotes}</span>\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 min-w-0\">\n                  <h3 className=\"font-bold text-sm text-slate-800 dark:text-slate-200 line-clamp-2\">\n                    {q.title}\n                  </h3>\n                  <p className=\"text-xs text-slate-500 mt-1 line-clamp-2\">\n                    {q.body}\n                  </p>\n                  <div className=\"flex flex-wrap items-center gap-2 mt-2\">\n                    <span className={`inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold ${CATEGORY_COLORS[q.category] || CATEGORY_COLORS.generale}`}>\n                      {CATEGORY_ICONS[q.category]} {t(`forum.cat.${q.category}`)}\n                    </span>\n                    {q.tags.slice(0, 3).map(tag => (\n                      <span key={tag} className=\"px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 text-slate-500 rounded text-[9px]\">\n                        {tag}\n                      </span>\n                    ))}\n                    <span className=\"flex items-center gap-1 text-[10px] text-slate-500 ml-auto\">\n                      <MessageCircle className=\"w-3 h-3\" /> {q.answerCount}\n                      <span className=\"mx-1\">¬∑</span>\n                      <Clock className=\"w-3 h-3\" /> {timeAgo(q.createdAt?.toDate() || null)}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CommunityForum;\n"],"names":["__iconNode","LogIn","createLucideIcon","MessageCircle","Tag","ThumbsUp","CATEGORY_ICONS","CATEGORY_COLORS","timeAgo","date","seconds","CommunityForum","t","useTranslation","user","signIn","useAuth","questions","setQuestions","useState","loading","setLoading","error","setError","selectedCategory","setSelectedCategory","sortBy","setSortBy","selectedQuestion","setSelectedQuestion","answers","setAnswers","loadingAnswers","setLoadingAnswers","showNewForm","setShowNewForm","newTitle","setNewTitle","newBody","setNewBody","newCategory","setNewCategory","newTags","setNewTags","submitting","setSubmitting","newAnswer","setNewAnswer","submittingAnswer","setSubmittingAnswer","loadQuestions","useCallback","qs","getQuestions","e","useEffect","openQuestion","q","ans","getAnswers","Analytics","handleCreateQuestion","createQuestion","getUserDisplayName","getUserPhotoURL","unlockAchievement","handleCreateAnswer","createAnswer","prev","handleUpvoteQuestion","qId","upvoteQuestion","already","id","handleUpvoteAnswer","aId","upvoteAnswer","a","jsxs","jsx","ArrowLeft","tag","User","Clock","_a","Loader2","answer","CheckCircle2","Send","MessageSquare","Filter","FORUM_CATEGORIES","cat","TrendingUp","Plus","AlertCircle"],"mappings":"qfAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,GAAa,CACjB,CAAC,OAAQ,CAAE,EAAG,iBAAkB,IAAK,QAAQ,CAAE,EAC/C,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,EACzC,CAAC,OAAQ,CAAE,EAAG,4CAA6C,IAAK,QAAQ,CAAE,CAC5E,EACMC,GAAQC,EAAiB,SAAUF,EAAU,ECdnD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,GAAa,CACjB,CACE,OACA,CACE,EAAG,8HACH,IAAK,QACX,CACA,CACA,EACMG,GAAgBD,EAAiB,iBAAkBF,EAAU,EClBnE;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,GAAa,CACjB,CACE,OACA,CACE,EAAG,uJACH,IAAK,QACX,CACA,EACE,CAAC,SAAU,CAAE,GAAI,MAAO,GAAI,MAAO,EAAG,KAAM,KAAM,eAAgB,IAAK,QAAQ,CAAE,CACnF,EACMI,GAAMF,EAAiB,MAAOF,EAAU,ECnB9C;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,GAAa,CACjB,CACE,OACA,CACE,EAAG,2JACH,IAAK,QACX,CACA,EACE,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,CAC3C,EACMK,EAAWH,EAAiB,YAAaF,EAAU,ECMnDM,EAAyC,CAC7C,UAAW,KACX,SAAU,KACV,cAAe,KACf,SAAU,KACV,UAAW,KACX,UAAW,KACX,OAAQ,KACR,SAAU,cACV,SAAU,IACZ,EAEMC,EAA0C,CAC9C,UAAW,+EACX,SAAU,mEACV,cAAe,mEACf,SAAU,uEACV,UAAW,2EACX,UAAW,2EACX,OAAQ,mEACR,SAAU,mEACV,SAAU,mEACZ,EAIA,SAASC,EAAQC,EAA2B,CAC1C,GAAI,CAACA,EAAM,MAAO,GAClB,MAAMC,EAAU,KAAK,OAAO,KAAK,MAAQD,EAAK,QAAA,GAAa,GAAI,EAC/D,OAAIC,EAAU,GAAW,SACrBA,EAAU,KAAa,GAAG,KAAK,MAAMA,EAAU,EAAE,CAAC,UAClDA,EAAU,MAAc,GAAG,KAAK,MAAMA,EAAU,IAAI,CAAC,OACrDA,EAAU,OAAgB,GAAG,KAAK,MAAMA,EAAU,KAAK,CAAC,OACrDD,EAAK,mBAAmB,QAAS,CAAE,IAAK,UAAW,MAAO,QAAS,CAC5E,CAIA,MAAME,GAA2B,IAAM,OACrC,KAAM,CAAE,EAAAC,CAAA,EAAMC,GAAA,EACR,CAAE,KAAAC,EAAM,OAAAC,CAAA,EAAWC,GAAA,EAGnB,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAA0B,CAAA,CAAE,EACxD,CAACC,GAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAwB,IAAI,EAChD,CAACK,EAAkBC,EAAmB,EAAIN,EAAAA,SAA6B,EAAE,EACzE,CAACO,EAAQC,CAAS,EAAIR,EAAAA,SAA+B,QAAQ,EAG7D,CAACS,EAAkBC,CAAmB,EAAIV,EAAAA,SAA+B,IAAI,EAC7E,CAACW,EAASC,CAAU,EAAIZ,EAAAA,SAAwB,CAAA,CAAE,EAClD,CAACa,GAAgBC,CAAiB,EAAId,EAAAA,SAAS,EAAK,EAGpD,CAACe,EAAaC,CAAc,EAAIhB,EAAAA,SAAS,EAAK,EAC9C,CAACiB,EAAUC,CAAW,EAAIlB,EAAAA,SAAS,EAAE,EACrC,CAACmB,EAASC,CAAU,EAAIpB,EAAAA,SAAS,EAAE,EACnC,CAACqB,EAAaC,EAAc,EAAItB,EAAAA,SAAwB,UAAU,EAClE,CAACuB,EAASC,CAAU,EAAIxB,EAAAA,SAAS,EAAE,EACnC,CAACyB,EAAYC,CAAa,EAAI1B,EAAAA,SAAS,EAAK,EAG5C,CAAC2B,EAAWC,CAAY,EAAI5B,EAAAA,SAAS,EAAE,EACvC,CAAC6B,EAAkBC,CAAmB,EAAI9B,EAAAA,SAAS,EAAK,EAIxD+B,EAAgBC,EAAAA,YAAY,SAAY,CAC5C9B,EAAW,EAAI,EACfE,EAAS,IAAI,EACb,GAAI,CACF,MAAM6B,EAAK,MAAMC,GAAa,CAC5B,SAAU7B,GAAoB,OAC9B,OAAAE,CAAA,CACD,EACDR,EAAakC,CAAE,CACjB,OAASE,EAAG,CACV,QAAQ,KAAK,4BAA6BA,CAAC,EAC3C/B,EAASX,EAAE,iBAAiB,GAAK,sCAAsC,CACzE,QAAA,CACES,EAAW,EAAK,CAClB,CACF,EAAG,CAACG,EAAkBE,EAAQd,CAAC,CAAC,EAEhC2C,EAAAA,UAAU,IAAM,CACdL,EAAA,CACF,EAAG,CAACA,CAAa,CAAC,EAIlB,MAAMM,GAAeL,cAAY,MAAOM,GAAqB,CAC3D5B,EAAoB4B,CAAC,EACrBxB,EAAkB,EAAI,EACtB,GAAI,CACF,MAAMyB,EAAM,MAAMC,EAAWF,EAAE,EAAE,EACjC1B,EAAW2B,CAAG,CAChB,OAASJ,EAAG,CACV,QAAQ,KAAK,0BAA2BA,CAAC,CAC3C,QAAA,CACErB,EAAkB,EAAK,CACzB,CACA2B,EAAU,mBAAmB,QAAS,WAAY,OAAQH,EAAE,EAAE,CAChE,EAAG,CAAA,CAAE,EAICI,GAAuBV,EAAAA,YAAY,SAAY,CACnD,GAAI,GAACrC,GAAQ,CAACsB,EAAS,QAAU,CAACE,EAAQ,QAC1C,CAAAO,EAAc,EAAI,EAClB,GAAI,CACF,MAAMiB,GAAe,CACnB,MAAO1B,EAAS,KAAA,EAChB,KAAME,EAAQ,KAAA,EACd,SAAUxB,EAAK,IACf,WAAYiD,GAAmBjD,CAAI,EACnC,YAAakD,EAAgBlD,CAAI,EACjC,SAAU0B,EACV,KAAME,EAAQ,MAAM,GAAG,EAAE,IAAI9B,GAAKA,EAAE,MAAM,EAAE,OAAO,OAAO,CAAA,CAC3D,EACDyB,EAAY,EAAE,EACdE,EAAW,EAAE,EACbI,EAAW,EAAE,EACbR,EAAe,EAAK,EACpB8B,EAAkB,sBAAsB,EACxC,MAAMf,EAAA,EACNU,EAAU,mBAAmB,QAAS,WAAY,SAAUpB,CAAW,CACzE,OAASc,EAAG,CACV,QAAQ,KAAK,6BAA8BA,CAAC,CAC9C,QAAA,CACET,EAAc,EAAK,CACrB,EACF,EAAG,CAAC/B,EAAMsB,EAAUE,EAASE,EAAaE,EAASQ,CAAa,CAAC,EAI3DgB,GAAqBf,EAAAA,YAAY,SAAY,CACjD,GAAI,GAACrC,GAAQ,CAACc,GAAoB,CAACkB,EAAU,QAC7C,CAAAG,EAAoB,EAAI,EACxB,GAAI,CACF,MAAMkB,GAAa,CACjB,WAAYvC,EAAiB,GAC7B,KAAMkB,EAAU,KAAA,EAChB,SAAUhC,EAAK,IACf,WAAYiD,GAAmBjD,CAAI,EACnC,YAAakD,EAAgBlD,CAAI,CAAA,CAClC,EACDiC,EAAa,EAAE,EAEf,MAAMW,EAAM,MAAMC,EAAW/B,EAAiB,EAAE,EAChDG,EAAW2B,CAAG,EAEd7B,EAAoBuC,GAAQA,EAAO,CAAE,GAAGA,EAAM,YAAaA,EAAK,YAAc,CAAA,EAAM,IAAI,EACxFH,EAAkB,oBAAoB,EACtCL,EAAU,mBAAmB,QAAS,SAAU,SAAUhC,EAAiB,EAAE,CAC/E,OAAS0B,EAAG,CACV,QAAQ,KAAK,2BAA4BA,CAAC,CAC5C,QAAA,CACEL,EAAoB,EAAK,CAC3B,EACF,EAAG,CAACnC,EAAMc,EAAkBkB,CAAS,CAAC,EAIhCuB,GAAuBlB,cAAY,MAAOmB,GAAgB,CAC9D,GAAKxD,EACL,GAAI,CACF,MAAMyD,GAAeD,EAAKxD,EAAK,GAAG,EAClCI,EAAakD,GACXA,EAAK,IAAIX,GAAK,CACZ,GAAIA,EAAE,KAAOa,EAAK,OAAOb,EACzB,MAAMe,EAAUf,EAAE,UAAU,SAAS3C,EAAK,GAAG,EAC7C,MAAO,CACL,GAAG2C,EACH,QAASe,EAAUf,EAAE,QAAU,EAAIA,EAAE,QAAU,EAC/C,UAAWe,EAAUf,EAAE,UAAU,OAAOgB,GAAMA,IAAO3D,EAAK,GAAG,EAAI,CAAC,GAAG2C,EAAE,UAAW3C,EAAK,GAAG,CAAA,CAE9F,CAAC,CAAA,CAEL,OAASwC,EAAG,CACV,QAAQ,KAAK,iBAAkBA,CAAC,CAClC,CACF,EAAG,CAACxC,CAAI,CAAC,EAEH4D,GAAqBvB,cAAY,MAAOwB,GAAgB,CAC5D,GAAK7D,EACL,GAAI,CACF,MAAM8D,GAAaD,EAAK7D,EAAK,GAAG,EAChCiB,EAAWqC,GACTA,EAAK,IAAIS,GAAK,CACZ,GAAIA,EAAE,KAAOF,EAAK,OAAOE,EACzB,MAAML,EAAUK,EAAE,UAAU,SAAS/D,EAAK,GAAG,EAC7C,MAAO,CACL,GAAG+D,EACH,QAASL,EAAUK,EAAE,QAAU,EAAIA,EAAE,QAAU,EAC/C,UAAWL,EAAUK,EAAE,UAAU,OAAOJ,GAAMA,IAAO3D,EAAK,GAAG,EAAI,CAAC,GAAG+D,EAAE,UAAW/D,EAAK,GAAG,CAAA,CAE9F,CAAC,CAAA,CAEL,OAASwC,EAAG,CACV,QAAQ,KAAK,wBAAyBA,CAAC,CACzC,CACF,EAAG,CAACxC,CAAI,CAAC,EAIT,OAAIc,EAEAkD,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CAAEjD,EAAoB,IAAI,EAAGE,EAAW,CAAA,CAAE,CAAG,EAC5D,UAAU,4HAEV,SAAA,CAAAgD,EAAAA,IAACC,GAAA,CAAU,UAAU,SAAA,CAAU,EAC9BpE,EAAE,kBAAkB,GAAK,oBAAA,CAAA,CAAA,EAI5BmE,EAAAA,IAAC,MAAA,CAAI,UAAU,uGACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,MACb,SAAAD,OAAC,MAAA,CAAI,UAAU,yBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMV,GAAqBzC,EAAiB,EAAE,EACvD,SAAU,CAACd,EACX,UAAW,sCACTA,GAAQc,EAAiB,UAAU,SAASd,EAAK,GAAG,EAChD,+EACA,wFACN,IAAKA,EAAyC,GAAlC,+BAAoC,GAEhD,SAAAiE,EAAAA,IAAC1E,EAAA,CAAS,UAAU,SAAA,CAAU,CAAA,CAAA,EAEhC0E,EAAAA,IAAC,OAAA,CAAK,UAAU,wDAAyD,WAAiB,OAAA,CAAQ,CAAA,EACpG,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,6DACX,SAAAnD,EAAiB,MACpB,EACAmD,EAAAA,IAAC,IAAA,CAAE,UAAU,iFACV,WAAiB,KACpB,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAW,iFAAiFvE,EAAgBqB,EAAiB,QAAQ,GAAKrB,EAAgB,QAAQ,GACrK,SAAA,CAAAD,EAAesB,EAAiB,QAAQ,EAAE,IAAEhB,EAAE,aAAagB,EAAiB,QAAQ,EAAE,CAAA,EACzF,EACCA,EAAiB,KAAK,OACrBkD,OAAC,OAAA,CAAe,UAAU,mHACxB,SAAA,CAAAC,EAAAA,IAAC3E,GAAA,CAAI,UAAU,aAAA,CAAc,EAAG6E,CAAA,CAAA,EADvBA,CAEX,CACD,CAAA,EACH,EACAH,EAAAA,KAAC,MAAA,CAAI,UAAU,sDACZ,SAAA,CAAAlD,EAAiB,YAChBmD,EAAAA,IAAC,MAAA,CAAI,IAAKnD,EAAiB,YAAa,IAAI,GAAG,UAAU,uBAAuB,eAAe,cAAc,EAE7GmD,EAAAA,IAACG,EAAA,CAAK,UAAU,UAAU,EAE5BH,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAa,WAAiB,WAAW,EACzDD,EAAAA,KAAC,OAAA,CAAK,UAAU,0BAA0B,SAAA,CAAAC,EAAAA,IAACI,EAAA,CAAM,UAAU,SAAA,CAAU,EAAG3E,IAAQ4E,EAAAxD,EAAiB,YAAjB,YAAAwD,EAA4B,WAAY,IAAI,CAAA,CAAA,CAAE,CAAA,CAAA,CAChI,CAAA,CAAA,CACF,CAAA,CAAA,CACF,EACF,EACF,SAGC,MAAA,CACC,SAAA,CAAAN,EAAAA,KAAC,KAAA,CAAG,UAAU,oFACZ,SAAA,CAAAC,EAAAA,IAAC5E,GAAA,CAAc,UAAU,SAAA,CAAU,EAClCyB,EAAiB,YAAY,IAAEhB,EAAE,eAAe,GAAK,UAAA,EACxD,EAECoB,GACC+C,EAAAA,IAAC,MAAA,CAAI,UAAU,kCACb,SAAAA,EAAAA,IAACM,GAAQ,UAAU,mCAAA,CAAoC,EACzD,EACEvD,EAAQ,SAAW,EACrBiD,EAAAA,IAAC,OAAI,UAAU,0CACZ,WAAE,iBAAiB,GAAK,wCAAA,CAC3B,QAEC,MAAA,CAAI,UAAU,YACZ,SAAAjD,EAAQ,cACPiD,OAAAA,MAAC,MAAA,CAAoB,UAAW,oDAC9BO,EAAO,SAAW,qFAAuF,wCAC3G,GACE,SAAAR,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAML,GAAmBY,EAAO,EAAE,EAC3C,SAAU,CAACxE,EACX,UAAW,oCACTA,GAAQwE,EAAO,UAAU,SAASxE,EAAK,GAAG,EACtC,+EACA,uCACN,IAAKA,EAAyC,GAAlC,+BAAoC,GAEhD,SAAAiE,EAAAA,IAAC1E,EAAA,CAAS,UAAU,SAAA,CAAU,CAAA,CAAA,EAEhC0E,EAAAA,IAAC,OAAA,CAAK,UAAU,mCAAoC,WAAO,QAAQ,EAClEO,EAAO,UAAYP,EAAAA,IAACQ,GAAA,CAAa,UAAU,0BAAA,CAA2B,CAAA,EACzE,EACAT,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,iFACV,SAAAO,EAAO,KACV,EACAR,EAAAA,KAAC,MAAA,CAAI,UAAU,0DACZ,SAAA,CAAAQ,EAAO,YACNP,EAAAA,IAAC,MAAA,CAAI,IAAKO,EAAO,YAAa,IAAI,GAAG,UAAU,uBAAuB,eAAe,cAAc,EAEnGP,EAAAA,IAACG,EAAA,CAAK,UAAU,cAAc,EAEhCH,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAa,WAAO,WAAW,EAC/CA,MAAC,QAAM,SAAAvE,IAAQ4E,EAAAE,EAAO,YAAP,YAAAF,EAAkB,WAAY,IAAI,CAAA,CAAE,CAAA,CAAA,CACrD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAjCQE,EAAO,EAkCjB,EACD,CAAA,CACH,CAAA,EAEJ,EAGCxE,EACCgE,EAAAA,KAAC,MAAA,CAAI,UAAU,0FACb,SAAA,CAAAC,EAAAA,IAAC,WAAA,CACC,MAAOjC,EACP,SAAWQ,GAAMP,EAAaO,EAAE,OAAO,KAAK,EAC5C,YAAa1C,EAAE,yBAAyB,GAAK,4BAC7C,UAAU,uIAAA,CAAA,EAEZmE,EAAAA,IAAC,MAAA,CAAI,UAAU,wBACb,SAAAD,EAAAA,KAAC,SAAA,CACC,QAASZ,GACT,SAAUlB,GAAoB,CAACF,EAAU,KAAA,EACzC,UAAU,gJAET,SAAA,CAAAE,EAAmB+B,EAAAA,IAACM,GAAQ,UAAU,0BAAA,CAA2B,EAAKN,EAAAA,IAACS,EAAA,CAAK,UAAU,aAAA,CAAc,EACpG5E,EAAE,oBAAoB,GAAK,UAAA,CAAA,CAAA,CAC9B,CACF,CAAA,CAAA,CACF,EAEAmE,EAAAA,IAAC,MAAA,CAAI,UAAU,8DACb,gBAAC,SAAA,CAAO,QAAShE,EAAQ,UAAU,kIACjC,SAAA,CAAAgE,EAAAA,IAAC9E,GAAA,CAAM,UAAU,SAAA,CAAU,EAC1BW,EAAE,qBAAqB,GAAK,uBAAA,CAAA,CAC/B,CAAA,CACF,CAAA,EAEJ,EAOFkE,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8JACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qDACb,eAACU,EAAA,CAAc,UAAU,+CAA+C,CAAA,CAC1E,QACC,KAAA,CAAG,UAAU,0DAA2D,SAAA7E,EAAE,aAAa,CAAA,CAAE,CAAA,EAC5F,QACC,IAAA,CAAE,UAAU,+CAAgD,SAAAA,EAAE,gBAAgB,CAAA,CAAE,CAAA,EACnF,EAGAkE,EAAAA,KAAC,MAAA,CAAI,UAAU,kCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,EAAAA,IAACW,GAAA,CAAO,UAAU,iCAAA,CAAkC,EACpDZ,EAAAA,KAAC,SAAA,CACC,MAAOtD,EACP,SAAW8B,GAAM7B,GAAoB6B,EAAE,OAAO,KAA2B,EACzE,UAAU,yHAEV,SAAA,CAAAyB,MAAC,UAAO,MAAM,GAAI,SAAAnE,EAAE,qBAAqB,GAAK,qBAAqB,EAClE+E,GAAiB,IAAIC,GACpBd,EAAAA,KAAC,SAAA,CAAiB,MAAOc,EACtB,SAAA,CAAAtF,EAAesF,CAAG,EAAE,IAAEhF,EAAE,aAAagF,CAAG,EAAE,CAAA,CAAA,EADhCA,CAEb,CACD,CAAA,CAAA,CAAA,CACH,EACF,EAGAd,EAAAA,KAAC,MAAA,CAAI,UAAU,uGACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMnD,EAAU,QAAQ,EACjC,UAAW,sFACTD,IAAW,SAAW,2EAA6E,gBACrG,GAEA,SAAA,CAAAqD,EAAAA,IAACI,EAAA,CAAM,UAAU,SAAA,CAAU,EAAE,IAAEvE,EAAE,cAAc,GAAK,SAAA,CAAA,CAAA,EAEtDkE,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMnD,EAAU,SAAS,EAClC,UAAW,sFACTD,IAAW,UAAY,2EAA6E,gBACtG,GAEA,SAAA,CAAAqD,EAAAA,IAACc,GAAA,CAAW,UAAU,SAAA,CAAU,EAAE,IAAEjF,EAAE,eAAe,GAAK,UAAA,CAAA,CAAA,CAC5D,EACF,EAGCE,EACCgE,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM3C,EAAe,CAACD,CAAW,EAC1C,UAAU,kIAEV,SAAA,CAAA6C,EAAAA,IAACe,GAAA,CAAK,UAAU,SAAA,CAAU,EACzBlF,EAAE,mBAAmB,GAAK,iBAAA,CAAA,CAAA,EAG7BkE,EAAAA,KAAC,SAAA,CACC,QAAS/D,EACT,UAAU,kMAEV,SAAA,CAAAgE,EAAAA,IAAC9E,GAAA,CAAM,UAAU,SAAA,CAAU,EAC1BW,EAAE,kBAAkB,GAAK,qBAAA,CAAA,CAAA,CAC5B,EAEJ,EAGCsB,GAAepB,GACdgE,OAAC,MAAA,CAAI,UAAU,sGACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO3C,EACP,SAAWkB,GAAMjB,EAAYiB,EAAE,OAAO,KAAK,EAC3C,YAAa1C,EAAE,wBAAwB,GAAK,0BAC5C,UAAU,8HACV,UAAW,GAAA,CAAA,EAEbmE,EAAAA,IAAC,WAAA,CACC,MAAOzC,EACP,SAAWgB,GAAMf,EAAWe,EAAE,OAAO,KAAK,EAC1C,YAAa1C,EAAE,uBAAuB,GAAK,0CAC3C,UAAU,0IAAA,CAAA,EAEZkE,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,MAAC,SAAM,UAAU,8CAA+C,SAAAnE,EAAE,gBAAgB,GAAK,YAAY,EACnGmE,EAAAA,IAAC,SAAA,CACC,MAAOvC,EACP,SAAWc,GAAMb,GAAea,EAAE,OAAO,KAAsB,EAC/D,UAAU,kHAET,YAAiB,IAAIsC,GACpBd,OAAC,SAAA,CAAiB,MAAOc,EAAM,SAAA,CAAAtF,EAAesF,CAAG,EAAE,IAAEhF,EAAE,aAAagF,CAAG,EAAE,CAAA,CAAA,EAA5DA,CAA8D,CAC5E,CAAA,CAAA,CACH,EACF,SACC,MAAA,CACC,SAAA,CAAAb,MAAC,SAAM,UAAU,8CAA+C,SAAAnE,EAAE,YAAY,GAAK,4BAA4B,EAC/GmE,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOrC,EACP,SAAWY,GAAMX,EAAWW,EAAE,OAAO,KAAK,EAC1C,YAAY,gCACZ,UAAU,iHAAA,CAAA,CACZ,CAAA,CACF,CAAA,EACF,EACAwB,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM5C,EAAe,EAAK,EACnC,UAAU,oFAET,SAAAvB,EAAE,cAAc,GAAK,SAAA,CAAA,EAExBkE,EAAAA,KAAC,SAAA,CACC,QAASjB,GACT,SAAUjB,GAAc,CAACR,EAAS,QAAU,CAACE,EAAQ,KAAA,EACrD,UAAU,sJAET,SAAA,CAAAM,EAAamC,EAAAA,IAACM,GAAQ,UAAU,0BAAA,CAA2B,EAAKN,EAAAA,IAACS,EAAA,CAAK,UAAU,aAAA,CAAc,EAC9F5E,EAAE,cAAc,GAAK,UAAA,CAAA,CAAA,CACxB,CAAA,CACF,CAAA,EACF,EAIDQ,GACC0D,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACM,EAAA,CAAQ,UAAU,mCAAA,CAAoC,QACtD,IAAA,CAAE,UAAU,UAAW,SAAAzE,EAAE,eAAe,GAAK,wBAAA,CAAyB,CAAA,CAAA,CACzE,EACEU,EACFwD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACgB,GAAA,CAAY,UAAU,qCAAA,CAAsC,EAC7DhB,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAA0B,SAAAzD,EAAM,EAC7CyD,EAAAA,IAAC,UAAO,QAAS7B,EAAe,UAAU,+DACvC,SAAAtC,EAAE,aAAa,GAAK,SAAA,CACvB,CAAA,EACF,EACEK,EAAU,SAAW,EACvB6D,OAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACU,EAAA,CAAc,UAAU,mCAAA,CAAoC,QAC5D,IAAA,CAAE,UAAU,YAAa,SAAA7E,EAAE,aAAa,GAAK,yBAAyB,QACtE,IAAA,CAAE,UAAU,eAAgB,SAAAA,EAAE,iBAAiB,GAAK,iDAAA,CAAkD,CAAA,CAAA,CACzG,EAEAmE,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAA9D,EAAU,IAAIwC,GAAA,OACbsB,OAAAA,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAMvB,GAAaC,CAAC,EAC7B,UAAU,kLAEV,SAAAqB,EAAAA,KAAC,MAAA,CAAI,UAAU,yBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAAC1E,EAAA,CAAS,UAAW,WAAWS,GAAQ2C,EAAE,UAAU,SAAS3C,EAAK,GAAG,EAAI,mBAAqB,gBAAgB,GAAI,EAClHiE,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAqC,WAAE,OAAA,CAAQ,CAAA,EACjE,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oEACX,SAAAtB,EAAE,MACL,EACAsB,EAAAA,IAAC,IAAA,CAAE,UAAU,2CACV,WAAE,KACL,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAW,oFAAoFvE,EAAgBkD,EAAE,QAAQ,GAAKlD,EAAgB,QAAQ,GACzJ,SAAA,CAAAD,EAAemD,EAAE,QAAQ,EAAE,IAAE7C,EAAE,aAAa6C,EAAE,QAAQ,EAAE,CAAA,EAC3D,EACCA,EAAE,KAAK,MAAM,EAAG,CAAC,EAAE,IAAIwB,GACtBF,EAAAA,IAAC,OAAA,CAAe,UAAU,iFACvB,SAAAE,CAAA,EADQA,CAEX,CACD,EACDH,EAAAA,KAAC,OAAA,CAAK,UAAU,6DACd,SAAA,CAAAC,EAAAA,IAAC5E,GAAA,CAAc,UAAU,SAAA,CAAU,EAAE,IAAEsD,EAAE,YACzCsB,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAO,SAAA,IAAC,EACxBA,EAAAA,IAACI,EAAA,CAAM,UAAU,SAAA,CAAU,EAAE,IAAE3E,IAAQ4E,EAAA3B,EAAE,YAAF,YAAA2B,EAAa,WAAY,IAAI,CAAA,CAAA,CACtE,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAnCK3B,EAAE,EAAA,EAqCV,CAAA,CACH,CAAA,EAEJ,CAEJ","x_google_ignoreList":[0,1,2,3]}